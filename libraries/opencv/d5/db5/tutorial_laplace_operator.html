<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<title>OpenCV: Laplace Operator</title>
<link href="../../opencv.ico" rel="shortcut icon" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../tutorial-utils.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
  loader: {
    load: ['[tex]/ams']
  },
  tex: {
    macros: {},
    packages: ['base','configmacros','ams']
  }
};
//<![CDATA[
window.MathJax = {
    loader: {load: ['[tex]/ams']},
    tex: {
        packages: {'[+]': ['ams']},
        macros: {
            matTT: [ "\\[ \\left|\\begin{array}{ccc} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{array}\\right| \\]", 9],
            fork: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ \\end{array} \\right.", 4],
            forkthree: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ \\end{array} \\right.", 6],
            forkfour: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ #7 & \\mbox{#8}\\\\ \\end{array} \\right.", 8],
            vecthree: ["\\begin{bmatrix} #1\\\\ #2\\\\ #3 \\end{bmatrix}", 3],
            vecthreethree: ["\\begin{bmatrix} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{bmatrix}", 9],
            cameramatrix: ["#1 = \\begin{bmatrix} f_x & 0 & c_x\\\\ 0 & f_y & c_y\\\\ 0 & 0 & 1 \\end{bmatrix}", 1],
            distcoeffs: ["(k_1, k_2, p_1, p_2[, k_3[, k_4, k_5, k_6 [, s_1, s_2, s_3, s_4[, \\tau_x, \\tau_y]]]]) \\text{ of 4, 5, 8, 12 or 14 elements}"],
            distcoeffsfisheye: ["(k_1, k_2, k_3, k_4)"],
            hdotsfor: ["\\dots", 1],
            mathbbm: ["\\mathbb{#1}", 1],
            bordermatrix: ["\\matrix{#1}", 1]
        },
        processEscapes: false
    }
};
//]]>
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-chtml.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<!--#include virtual="/google-search.html"-->
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../opencv-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenCV
   &#160;<span id="projectnumber">4.10.0</span>
   </div>
   <div id="projectbrief">Open Source Computer Vision</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d9/df8/tutorial_root.html">OpenCV Tutorials</a></li><li class="navelem"><a class="el" href="../../d7/da8/tutorial_table_of_content_imgproc.html">Image Processing (imgproc module)</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Laplace Operator</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md679">Goal</a></li>
<li class="level1"><a href="#autotoc_md680">Theory</a><ul><li class="level2"><a href="#autotoc_md681">Laplacian Operator</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md682">Code</a></li>
<li class="level1"><a href="#autotoc_md683">Explanation</a><ul><li class="level2"><a href="#autotoc_md684">Declare variables</a></li>
<li class="level2"><a href="#autotoc_md685">Load source image</a></li>
<li class="level2"><a href="#autotoc_md686">Reduce noise</a></li>
<li class="level2"><a href="#autotoc_md687">Grayscale</a></li>
<li class="level2"><a href="#autotoc_md688">Laplacian operator</a></li>
<li class="level2"><a href="#autotoc_md689">Convert output to a &lt;em&gt;CV_8U&lt;/em&gt; image</a></li>
<li class="level2"><a href="#autotoc_md690">Display the result</a></li>
</ul>
</li>
<li class="level1"><a href="#autotoc_md691">Results</a></li>
</ul>
</div>
<div class="textblock"><p><b>Prev Tutorial:</b> <a class="el" href="../../d2/d2c/tutorial_sobel_derivatives.html">Sobel Derivatives</a> <br  />
<b>Next Tutorial:</b> <a class="el" href="../../da/d5c/tutorial_canny_detector.html">Canny Edge Detector</a> <br  />
 </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadRight"></th><th class="markdownTableHeadLeft"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyRight">Original author   </td><td class="markdownTableBodyLeft">Ana Huam√°n    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyRight">Compatibility   </td><td class="markdownTableBodyLeft">OpenCV &gt;= 3.0   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md679"></a>
Goal</h1>
<p>In this tutorial you will learn how to:</p>
<ul>
<li>Use the OpenCV function <b>Laplacian()</b> to implement a discrete analog of the <em>Laplacian operator</em>.</li>
</ul>
<h1><a class="anchor" id="autotoc_md680"></a>
Theory</h1>
<ol type="1">
<li>In the previous tutorial we learned how to use the <em>Sobel Operator</em>. It was based on the fact that in the edge area, the pixel intensity shows a "jump" or a high variation of intensity. Getting the first derivative of the intensity, we observed that an edge is characterized by a maximum, as it can be seen in the figure:</li>
</ol>
<div class="image">
<img src="../../Laplace_Operator_Tutorial_Theory_Previous.jpg" alt=""/>
</div>
    <ol type="1">
<li>And...what happens if we take the second derivative?</li>
</ol>
<div class="image">
<img src="../../Laplace_Operator_Tutorial_Theory_ddIntensity.jpg" alt=""/>
</div>
    <p>You can observe that the second derivative is zero! So, we can also use this criterion to attempt to detect edges in an image. However, note that zeros will not only appear in edges (they can actually appear in other meaningless locations); this can be solved by applying filtering where needed.</p>
<h2><a class="anchor" id="autotoc_md681"></a>
Laplacian Operator</h2>
<ol type="1">
<li>From the explanation above, we deduce that the second derivative can be used to <em>detect edges</em>. Since images are "*2D*", we would need to take the derivative in both dimensions. Here, the Laplacian operator comes handy.</li>
<li><p class="startli">The <em>Laplacian operator</em> is defined by:</p>
<p class="formulaDsp">
\[Laplace(f) = \dfrac{\partial^{2} f}{\partial x^{2}} + \dfrac{\partial^{2} f}{\partial y^{2}}\]
</p>
</li>
<li>The Laplacian operator is implemented in OpenCV by the function <b>Laplacian()</b> . In fact, since the Laplacian uses the gradient of images, it calls internally the <em>Sobel</em> operator to perform its computation.</li>
</ol>
<h1><a class="anchor" id="autotoc_md682"></a>
Code</h1>
<ol type="1">
<li><b>What does this program do?</b><ul>
<li>Loads an image</li>
<li>Remove noise by applying a Gaussian blur and then convert the original image to grayscale</li>
<li>Applies a Laplacian operator to the grayscale image and stores the output image</li>
<li>Display the result in a window</li>
</ul>
</li>
</ol>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'><ol type="1">
<li>The tutorial code's is shown lines below. You can also download it from <a href="https://raw.githubusercontent.com/opencv/opencv/4.x/samples/cpp/tutorial_code/ImgTrans/Laplace_Demo.cpp" target="_blank">here</a> <div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d4f/imgproc_2include_2opencv2_2imgproc_8hpp.html">opencv2/imgproc.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d6/d87/imgcodecs_8hpp.html">opencv2/imgcodecs.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d4/dd5/highgui_8hpp.html">opencv2/highgui.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d2/d75/namespacecv.html">cv</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="../../dc/d89/highgui__qt_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv )</div>
<div class="line">{</div>
<div class="line">    <span class="comment">// Declare the variables we are going to use</span></div>
<div class="line">    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> src, src_gray, dst;</div>
<div class="line">    <span class="keywordtype">int</span> kernel_size = 3;</div>
<div class="line">    <span class="keywordtype">int</span> scale = 1;</div>
<div class="line">    <span class="keywordtype">int</span> delta = 0;</div>
<div class="line">    <span class="keywordtype">int</span> ddepth = <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga9d2ee1a8334733dea7482a47a88e0f87">CV_16S</a>;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* window_name = <span class="stringliteral">&quot;Laplace Demo&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* imageName = argc &gt;=2 ? argv[1] : <span class="stringliteral">&quot;lena.jpg&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    src = imread( samples::findFile( imageName ), IMREAD_COLOR ); <span class="comment">// Load an image</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check if image is loaded fine</span></div>
<div class="line">    <span class="keywordflow">if</span>(src.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#abbec3525a852e77998aba034813fded4">empty</a>()){</div>
<div class="line">        printf(<span class="stringliteral">&quot; Error opening image\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot; Program Arguments: [image_name -- default lena.jpg] \n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Reduce noise by blurring with a Gaussian filter ( kernel size = 3 )</span></div>
<div class="line">    GaussianBlur( src, src, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>(3, 3), 0, 0, BORDER_DEFAULT );</div>
<div class="line"> </div>
<div class="line">    cvtColor( src, src_gray, COLOR_BGR2GRAY ); <span class="comment">// Convert the image to grayscale</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> abs_dst;</div>
<div class="line">    Laplacian( src_gray, dst, ddepth, kernel_size, scale, delta, BORDER_DEFAULT );</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// converting back to CV_8U</span></div>
<div class="line">    convertScaleAbs( dst, abs_dst );</div>
<div class="line"> </div>
<div class="line">    imshow( window_name, abs_dst );</div>
<div class="line">    waitKey(0);</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aclasscv_1_1Mat_html"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html">cv::Mat</a></div><div class="ttdoc">n-dimensional dense array class</div><div class="ttdef"><b>Definition</b> mat.hpp:812</div></div>
<div class="ttc" id="aclasscv_1_1Mat_html_abbec3525a852e77998aba034813fded4"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#abbec3525a852e77998aba034813fded4">cv::Mat::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Returns true if the array has no elements.</div></div>
<div class="ttc" id="aclasscv_1_1Size___html"><div class="ttname"><a href="../../d6/d50/classcv_1_1Size__.html">cv::Size_</a></div><div class="ttdoc">Template class for specifying the size of an image or rectangle.</div><div class="ttdef"><b>Definition</b> types.hpp:335</div></div>
<div class="ttc" id="agroup__core__hal__interface_html_ga9d2ee1a8334733dea7482a47a88e0f87"><div class="ttname"><a href="../../d1/d1b/group__core__hal__interface.html#ga9d2ee1a8334733dea7482a47a88e0f87">CV_16S</a></div><div class="ttdeci">#define CV_16S</div><div class="ttdef"><b>Definition</b> interface.h:76</div></div>
<div class="ttc" id="ahighgui_8hpp_html"><div class="ttname"><a href="../../d4/dd5/highgui_8hpp.html">highgui.hpp</a></div></div>
<div class="ttc" id="ahighgui__qt_8cpp_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="../../dc/d89/highgui__qt_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition</b> highgui_qt.cpp:3</div></div>
<div class="ttc" id="aimgcodecs_8hpp_html"><div class="ttname"><a href="../../d6/d87/imgcodecs_8hpp.html">imgcodecs.hpp</a></div></div>
<div class="ttc" id="aimgproc_2include_2opencv2_2imgproc_8hpp_html"><div class="ttname"><a href="../../d1/d4f/imgproc_2include_2opencv2_2imgproc_8hpp.html">imgproc.hpp</a></div></div>
<div class="ttc" id="anamespacecv_html"><div class="ttname"><a href="../../d2/d75/namespacecv.html">cv</a></div><div class="ttdoc">&quot;black box&quot; representation of the file storage associated with a file on disk.</div><div class="ttdef"><b>Definition</b> core.hpp:102</div></div>
</div><!-- fragment -->  </div> </li>
</ol>
 <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'><ol type="1">
<li>The tutorial code's is shown lines below. You can also download it from <a href="https://raw.githubusercontent.com/opencv/opencv/4.x/samples/java/tutorial_code/ImgTrans/LaPlace/LaplaceDemo.java" target="_blank">here</a> <div class="fragment"><div class="line"> </div>
<div class="line"><span class="keyword">import</span> org.opencv.core.*;</div>
<div class="line"><span class="keyword">import</span> org.opencv.highgui.HighGui;</div>
<div class="line"><span class="keyword">import</span> org.opencv.imgcodecs.Imgcodecs;</div>
<div class="line"><span class="keyword">import</span> org.opencv.imgproc.Imgproc;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">class </span>LaplaceDemoRun {</div>
<div class="line"> </div>
<div class="line">    <span class="keyword">public</span> <span class="keywordtype">void</span> run(String[] args) {</div>
<div class="line">        <span class="comment">// Declare the variables we are going to use</span></div>
<div class="line">        Mat src, src_gray = <span class="keyword">new</span> Mat(), dst = <span class="keyword">new</span> Mat();</div>
<div class="line">        <span class="keywordtype">int</span> kernel_size = 3;</div>
<div class="line">        <span class="keywordtype">int</span> scale = 1;</div>
<div class="line">        <span class="keywordtype">int</span> delta = 0;</div>
<div class="line">        <span class="keywordtype">int</span> ddepth = CvType.CV_16S;</div>
<div class="line">        String window_name = <span class="stringliteral">&quot;Laplace Demo&quot;</span>;</div>
<div class="line"> </div>
<div class="line">        String imageName = ((args.length &gt; 0) ? args[0] : <span class="stringliteral">&quot;../data/lena.jpg&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        src = Imgcodecs.imread(imageName, Imgcodecs.IMREAD_COLOR); <span class="comment">// Load an image</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Check if image is loaded fine</span></div>
<div class="line">        <span class="keywordflow">if</span>( src.empty() ) {</div>
<div class="line">            System.out.println(<span class="stringliteral">&quot;Error opening image&quot;</span>);</div>
<div class="line">            System.out.println(<span class="stringliteral">&quot;Program Arguments: [image_name -- default ../data/lena.jpg] \n&quot;</span>);</div>
<div class="line">            System.exit(-1);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Reduce noise by blurring with a Gaussian filter ( kernel size = 3 )</span></div>
<div class="line">        Imgproc.GaussianBlur( src, src, <span class="keyword">new</span> Size(3, 3), 0, 0, Core.BORDER_DEFAULT );</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Convert the image to grayscale</span></div>
<div class="line">        Imgproc.cvtColor( src, src_gray, Imgproc.COLOR_RGB2GRAY );</div>
<div class="line"> </div>
<div class="line">        Mat abs_dst = <span class="keyword">new</span> Mat();</div>
<div class="line">        Imgproc.Laplacian( src_gray, dst, ddepth, kernel_size, scale, delta, Core.BORDER_DEFAULT );</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// converting back to CV_8U</span></div>
<div class="line">        Core.convertScaleAbs( dst, abs_dst );</div>
<div class="line"> </div>
<div class="line">        HighGui.imshow( window_name, abs_dst );</div>
<div class="line">        HighGui.waitKey(0);</div>
<div class="line"> </div>
<div class="line">        System.exit(0);</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">public</span> <span class="keyword">class </span>LaplaceDemo {</div>
<div class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keywordtype">void</span> <a class="code hl_function" href="../../dc/d89/highgui__qt_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(String[] args) {</div>
<div class="line">        <span class="comment">// Load the native library.</span></div>
<div class="line">        System.loadLibrary(Core.NATIVE_LIBRARY_NAME);</div>
<div class="line">        <span class="keyword">new</span> LaplaceDemoRun().run(args);</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment -->  </div> </li>
</ol>
 <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'><ol type="1">
<li>The tutorial code's is shown lines below. You can also download it from <a href="https://raw.githubusercontent.com/opencv/opencv/4.x/samples/python/tutorial_code/ImgTrans/LaPlace/laplace_demo.py" target="_blank">here</a> <div class="fragment"><div class="line"><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="stringliteral">@file laplace_demo.py</span></div>
<div class="line"><span class="stringliteral">@brief Sample code showing how to detect edges using the Laplace operator</span></div>
<div class="line"><span class="stringliteral">&quot;&quot;&quot;</span></div>
<div class="line"><span class="keyword">import</span> sys</div>
<div class="line"><span class="keyword">import</span> cv2 <span class="keyword">as</span> cv</div>
<div class="line"> </div>
<div class="line"><span class="keyword">def </span><a class="code hl_function" href="../../dc/d89/highgui__qt_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(argv):</div>
<div class="line">    <span class="comment"># [variables]</span></div>
<div class="line">    <span class="comment"># Declare the variables we are going to use</span></div>
<div class="line">    ddepth = cv.CV_16S</div>
<div class="line">    kernel_size = 3</div>
<div class="line">    window_name = <span class="stringliteral">&quot;Laplace Demo&quot;</span></div>
<div class="line">    <span class="comment"># [variables]</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># [load]</span></div>
<div class="line">    imageName = argv[0] <span class="keywordflow">if</span> len(argv) &gt; 0 <span class="keywordflow">else</span> <span class="stringliteral">&#39;lena.jpg&#39;</span></div>
<div class="line"> </div>
<div class="line">    src = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gab32ee19e22660912565f8140d0f675a8">cv.imread</a>(<a class="code hl_function" href="../../d6/dba/group__core__utils__samples.html#ga3a33b00033b46c698ff6340d95569c13">cv.samples.findFile</a>(imageName), cv.IMREAD_COLOR) <span class="comment"># Load an image</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Check if image is loaded fine</span></div>
<div class="line">    <span class="keywordflow">if</span> src <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;Error opening image&#39;</span>)</div>
<div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;Program Arguments: [image_name -- default lena.jpg]&#39;</span>)</div>
<div class="line">        <span class="keywordflow">return</span> -1</div>
<div class="line">    <span class="comment"># [load]</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># [reduce_noise]</span></div>
<div class="line">    <span class="comment"># Remove noise by blurring with a Gaussian filter</span></div>
<div class="line">    src = <a class="code hl_function" href="../../d4/d86/group__imgproc__filter.html#gaabe8c836e97159a9193fb0b11ac52cf1">cv.GaussianBlur</a>(src, (3, 3), 0)</div>
<div class="line">    <span class="comment"># [reduce_noise]</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># [convert_to_gray]</span></div>
<div class="line">    <span class="comment"># Convert the image to grayscale</span></div>
<div class="line">    src_gray = <a class="code hl_function" href="../../d8/d01/group__imgproc__color__conversions.html#ga397ae87e1288a81d2363b61574eb8cab">cv.cvtColor</a>(src, cv.COLOR_BGR2GRAY)</div>
<div class="line">    <span class="comment"># [convert_to_gray]</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Create Window</span></div>
<div class="line">    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5afdf8410934fd099df85c75b2e0888b">cv.namedWindow</a>(window_name, cv.WINDOW_AUTOSIZE)</div>
<div class="line"> </div>
<div class="line">    <span class="comment"># [laplacian]</span></div>
<div class="line">    <span class="comment"># Apply Laplace function</span></div>
<div class="line">    dst = <a class="code hl_function" href="../../d4/d86/group__imgproc__filter.html#gad78703e4c8fe703d479c1860d76429e6">cv.Laplacian</a>(src_gray, ddepth, ksize=kernel_size)</div>
<div class="line">    <span class="comment"># [laplacian]</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># [convert]</span></div>
<div class="line">    <span class="comment"># converting back to uint8</span></div>
<div class="line">    abs_dst = <a class="code hl_function" href="../../d2/de8/group__core__array.html#ga3460e9c9f37b563ab9dd550c4d8c4e7d">cv.convertScaleAbs</a>(dst)</div>
<div class="line">    <span class="comment"># [convert]</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># [display]</span></div>
<div class="line">    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">cv.imshow</a>(window_name, abs_dst)</div>
<div class="line">    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">cv.waitKey</a>(0)</div>
<div class="line">    <span class="comment"># [display]</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">return</span> 0</div>
<div class="line"> </div>
<div class="line"><span class="keywordflow">if</span> __name__ == <span class="stringliteral">&quot;__main__&quot;</span>:</div>
<div class="line">    <a class="code hl_function" href="../../dc/d89/highgui__qt_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(sys.argv[1:])</div>
<div class="ttc" id="agroup__core__array_html_ga3460e9c9f37b563ab9dd550c4d8c4e7d"><div class="ttname"><a href="../../d2/de8/group__core__array.html#ga3460e9c9f37b563ab9dd550c4d8c4e7d">cv::convertScaleAbs</a></div><div class="ttdeci">void convertScaleAbs(InputArray src, OutputArray dst, double alpha=1, double beta=0)</div><div class="ttdoc">Scales, calculates absolute values, and converts the result to 8-bit.</div></div>
<div class="ttc" id="agroup__core__utils__samples_html_ga3a33b00033b46c698ff6340d95569c13"><div class="ttname"><a href="../../d6/dba/group__core__utils__samples.html#ga3a33b00033b46c698ff6340d95569c13">cv::samples::findFile</a></div><div class="ttdeci">cv::String findFile(const cv::String &amp;relative_path, bool required=true, bool silentMode=false)</div><div class="ttdoc">Try to find requested data file.</div></div>
<div class="ttc" id="agroup__highgui_html_ga453d42fe4cb60e5723281a89973ee563"><div class="ttname"><a href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">cv::imshow</a></div><div class="ttdeci">void imshow(const String &amp;winname, InputArray mat)</div><div class="ttdoc">Displays an image in the specified window.</div></div>
<div class="ttc" id="agroup__highgui_html_ga5628525ad33f52eab17feebcfba38bd7"><div class="ttname"><a href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">cv::waitKey</a></div><div class="ttdeci">int waitKey(int delay=0)</div><div class="ttdoc">Waits for a pressed key.</div></div>
<div class="ttc" id="agroup__highgui_html_ga5afdf8410934fd099df85c75b2e0888b"><div class="ttname"><a href="../../d7/dfc/group__highgui.html#ga5afdf8410934fd099df85c75b2e0888b">cv::namedWindow</a></div><div class="ttdeci">void namedWindow(const String &amp;winname, int flags=WINDOW_AUTOSIZE)</div><div class="ttdoc">Creates a window.</div></div>
<div class="ttc" id="agroup__imgcodecs_html_gab32ee19e22660912565f8140d0f675a8"><div class="ttname"><a href="../../d4/da8/group__imgcodecs.html#gab32ee19e22660912565f8140d0f675a8">cv::imread</a></div><div class="ttdeci">CV_EXPORTS_W Mat imread(const String &amp;filename, int flags=IMREAD_COLOR)</div><div class="ttdoc">Loads an image from a file.</div></div>
<div class="ttc" id="agroup__imgproc__color__conversions_html_ga397ae87e1288a81d2363b61574eb8cab"><div class="ttname"><a href="../../d8/d01/group__imgproc__color__conversions.html#ga397ae87e1288a81d2363b61574eb8cab">cv::cvtColor</a></div><div class="ttdeci">void cvtColor(InputArray src, OutputArray dst, int code, int dstCn=0)</div><div class="ttdoc">Converts an image from one color space to another.</div></div>
<div class="ttc" id="agroup__imgproc__filter_html_gaabe8c836e97159a9193fb0b11ac52cf1"><div class="ttname"><a href="../../d4/d86/group__imgproc__filter.html#gaabe8c836e97159a9193fb0b11ac52cf1">cv::GaussianBlur</a></div><div class="ttdeci">void GaussianBlur(InputArray src, OutputArray dst, Size ksize, double sigmaX, double sigmaY=0, int borderType=BORDER_DEFAULT)</div><div class="ttdoc">Blurs an image using a Gaussian filter.</div></div>
<div class="ttc" id="agroup__imgproc__filter_html_gad78703e4c8fe703d479c1860d76429e6"><div class="ttname"><a href="../../d4/d86/group__imgproc__filter.html#gad78703e4c8fe703d479c1860d76429e6">cv::Laplacian</a></div><div class="ttdeci">void Laplacian(InputArray src, OutputArray dst, int ddepth, int ksize=1, double scale=1, double delta=0, int borderType=BORDER_DEFAULT)</div><div class="ttdoc">Calculates the Laplacian of an image.</div></div>
</div><!-- fragment -->  </div> </li>
</ol>
<h1><a class="anchor" id="autotoc_md683"></a>
Explanation</h1>
<h2><a class="anchor" id="autotoc_md684"></a>
Declare variables</h2>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">    <span class="comment">// Declare the variables we are going to use</span></div>
<div class="line">    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> src, src_gray, dst;</div>
<div class="line">    <span class="keywordtype">int</span> kernel_size = 3;</div>
<div class="line">    <span class="keywordtype">int</span> scale = 1;</div>
<div class="line">    <span class="keywordtype">int</span> delta = 0;</div>
<div class="line">    <span class="keywordtype">int</span> ddepth = <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga9d2ee1a8334733dea7482a47a88e0f87">CV_16S</a>;</div>
<div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* window_name = <span class="stringliteral">&quot;Laplace Demo&quot;</span>;</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">        <span class="comment">// Declare the variables we are going to use</span></div>
<div class="line">        Mat src, src_gray = <span class="keyword">new</span> Mat(), dst = <span class="keyword">new</span> Mat();</div>
<div class="line">        <span class="keywordtype">int</span> kernel_size = 3;</div>
<div class="line">        <span class="keywordtype">int</span> scale = 1;</div>
<div class="line">        <span class="keywordtype">int</span> delta = 0;</div>
<div class="line">        <span class="keywordtype">int</span> ddepth = CvType.CV_16S;</div>
<div class="line">        String window_name = <span class="stringliteral">&quot;Laplace Demo&quot;</span>;</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    <span class="comment"># Declare the variables we are going to use</span></div>
<div class="line">    ddepth = cv.CV_16S</div>
<div class="line">    kernel_size = 3</div>
<div class="line">    window_name = <span class="stringliteral">&quot;Laplace Demo&quot;</span></div>
</div><!-- fragment -->  </div> <h2><a class="anchor" id="autotoc_md685"></a>
Load source image</h2>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">    <span class="keyword">const</span> <span class="keywordtype">char</span>* imageName = argc &gt;=2 ? argv[1] : <span class="stringliteral">&quot;lena.jpg&quot;</span>;</div>
<div class="line"> </div>
<div class="line">    src = imread( samples::findFile( imageName ), IMREAD_COLOR ); <span class="comment">// Load an image</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check if image is loaded fine</span></div>
<div class="line">    <span class="keywordflow">if</span>(src.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#abbec3525a852e77998aba034813fded4">empty</a>()){</div>
<div class="line">        printf(<span class="stringliteral">&quot; Error opening image\n&quot;</span>);</div>
<div class="line">        printf(<span class="stringliteral">&quot; Program Arguments: [image_name -- default lena.jpg] \n&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">        String imageName = ((args.length &gt; 0) ? args[0] : <span class="stringliteral">&quot;../data/lena.jpg&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        src = Imgcodecs.imread(imageName, Imgcodecs.IMREAD_COLOR); <span class="comment">// Load an image</span></div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Check if image is loaded fine</span></div>
<div class="line">        <span class="keywordflow">if</span>( src.empty() ) {</div>
<div class="line">            System.out.println(<span class="stringliteral">&quot;Error opening image&quot;</span>);</div>
<div class="line">            System.out.println(<span class="stringliteral">&quot;Program Arguments: [image_name -- default ../data/lena.jpg] \n&quot;</span>);</div>
<div class="line">            System.exit(-1);</div>
<div class="line">        }</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    imageName = argv[0] <span class="keywordflow">if</span> len(argv) &gt; 0 <span class="keywordflow">else</span> <span class="stringliteral">&#39;lena.jpg&#39;</span></div>
<div class="line"> </div>
<div class="line">    src = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gab32ee19e22660912565f8140d0f675a8">cv.imread</a>(<a class="code hl_function" href="../../d6/dba/group__core__utils__samples.html#ga3a33b00033b46c698ff6340d95569c13">cv.samples.findFile</a>(imageName), cv.IMREAD_COLOR) <span class="comment"># Load an image</span></div>
<div class="line"> </div>
<div class="line">    <span class="comment"># Check if image is loaded fine</span></div>
<div class="line">    <span class="keywordflow">if</span> src <span class="keywordflow">is</span> <span class="keywordtype">None</span>:</div>
<div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;Error opening image&#39;</span>)</div>
<div class="line">        <span class="keywordflow">print</span> (<span class="stringliteral">&#39;Program Arguments: [image_name -- default lena.jpg]&#39;</span>)</div>
<div class="line">        <span class="keywordflow">return</span> -1</div>
</div><!-- fragment -->  </div> <h2><a class="anchor" id="autotoc_md686"></a>
Reduce noise</h2>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">    <span class="comment">// Reduce noise by blurring with a Gaussian filter ( kernel size = 3 )</span></div>
<div class="line">    GaussianBlur( src, src, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>(3, 3), 0, 0, BORDER_DEFAULT );</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">        <span class="comment">// Reduce noise by blurring with a Gaussian filter ( kernel size = 3 )</span></div>
<div class="line">        Imgproc.GaussianBlur( src, src, <span class="keyword">new</span> Size(3, 3), 0, 0, Core.BORDER_DEFAULT );</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    <span class="comment"># Remove noise by blurring with a Gaussian filter</span></div>
<div class="line">    src = <a class="code hl_function" href="../../d4/d86/group__imgproc__filter.html#gaabe8c836e97159a9193fb0b11ac52cf1">cv.GaussianBlur</a>(src, (3, 3), 0)</div>
</div><!-- fragment -->  </div> <h2><a class="anchor" id="autotoc_md687"></a>
Grayscale</h2>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">    cvtColor( src, src_gray, COLOR_BGR2GRAY ); <span class="comment">// Convert the image to grayscale</span></div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">        <span class="comment">// Convert the image to grayscale</span></div>
<div class="line">        Imgproc.cvtColor( src, src_gray, Imgproc.COLOR_RGB2GRAY );</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    <span class="comment"># Convert the image to grayscale</span></div>
<div class="line">    src_gray = <a class="code hl_function" href="../../d8/d01/group__imgproc__color__conversions.html#ga397ae87e1288a81d2363b61574eb8cab">cv.cvtColor</a>(src, cv.COLOR_BGR2GRAY)</div>
</div><!-- fragment -->  </div> <h2><a class="anchor" id="autotoc_md688"></a>
Laplacian operator</h2>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">    Laplacian( src_gray, dst, ddepth, kernel_size, scale, delta, BORDER_DEFAULT );</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">        Imgproc.Laplacian( src_gray, dst, ddepth, kernel_size, scale, delta, Core.BORDER_DEFAULT );</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    <span class="comment"># Apply Laplace function</span></div>
<div class="line">    dst = <a class="code hl_function" href="../../d4/d86/group__imgproc__filter.html#gad78703e4c8fe703d479c1860d76429e6">cv.Laplacian</a>(src_gray, ddepth, ksize=kernel_size)</div>
</div><!-- fragment -->  </div> <ul>
<li>The arguments are:<ul>
<li><em>src_gray</em>: The input image.</li>
<li><em>dst</em>: Destination (output) image</li>
<li><em>ddepth</em>: Depth of the destination image. Since our input is <em>CV_8U</em> we define <em>ddepth</em> = <em>CV_16S</em> to avoid overflow</li>
<li><em>kernel_size</em>: The kernel size of the Sobel operator to be applied internally. We use 3 in this example.</li>
<li><em>scale</em>, <em>delta</em> and <em>BORDER_DEFAULT</em>: We leave them as default values.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md689"></a>
Convert output to a &lt;em&gt;CV_8U&lt;/em&gt; image</h2>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">    <span class="comment">// converting back to CV_8U</span></div>
<div class="line">    convertScaleAbs( dst, abs_dst );</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">        <span class="comment">// converting back to CV_8U</span></div>
<div class="line">        Core.convertScaleAbs( dst, abs_dst );</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    <span class="comment"># converting back to uint8</span></div>
<div class="line">    abs_dst = <a class="code hl_function" href="../../d2/de8/group__core__array.html#ga3460e9c9f37b563ab9dd550c4d8c4e7d">cv.convertScaleAbs</a>(dst)</div>
</div><!-- fragment -->  </div> <h2><a class="anchor" id="autotoc_md690"></a>
Display the result</h2>
 <div class='newInnerHTML' title='cpp' style='display: none;'>C++</div><div class='toggleable_div label_cpp' style='display: none;'> <div class="fragment"><div class="line">    imshow( window_name, abs_dst );</div>
<div class="line">    waitKey(0);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='java' style='display: none;'>Java</div><div class='toggleable_div label_java' style='display: none;'> <div class="fragment"><div class="line">        HighGui.imshow( window_name, abs_dst );</div>
<div class="line">        HighGui.waitKey(0);</div>
</div><!-- fragment -->  </div>  <div class='newInnerHTML' title='python' style='display: none;'>Python</div><div class='toggleable_div label_python' style='display: none;'> <div class="fragment"><div class="line">    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga453d42fe4cb60e5723281a89973ee563">cv.imshow</a>(window_name, abs_dst)</div>
<div class="line">    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">cv.waitKey</a>(0)</div>
</div><!-- fragment -->  </div> <h1><a class="anchor" id="autotoc_md691"></a>
Results</h1>
<ol type="1">
<li>After compiling the code above, we can run it giving as argument the path to an image. For example, using as an input:</li>
</ol>
<div class="image">
<img src="../../Laplace_Operator_Tutorial_Original_Image.jpg" alt=""/>
</div>
    <ol type="1">
<li>We obtain the following result. Notice how the trees and the silhouette of the cow are approximately well defined (except in areas in which the intensity are very similar, i.e. around the cow's head). Also, note that the roof of the house behind the trees (right side) is notoriously marked. This is due to the fact that the contrast is higher in that region.</li>
</ol>
<div class="image">
<img src="../../Laplace_Operator_Tutorial_Result.jpg" alt=""/>
</div>
     </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 2 2024 21:52:13 for OpenCV by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.9.8
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
