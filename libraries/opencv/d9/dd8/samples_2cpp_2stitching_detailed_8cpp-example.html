<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<title>OpenCV: samples/cpp/stitching_detailed.cpp</title>
<link href="../../opencv.ico" rel="shortcut icon" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../tutorial-utils.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
  loader: {
    load: ['[tex]/ams']
  },
  tex: {
    macros: {},
    packages: ['base','configmacros','ams']
  }
};
//<![CDATA[
window.MathJax = {
    loader: {load: ['[tex]/ams']},
    tex: {
        packages: {'[+]': ['ams']},
        macros: {
            matTT: [ "\\[ \\left|\\begin{array}{ccc} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{array}\\right| \\]", 9],
            fork: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ \\end{array} \\right.", 4],
            forkthree: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ \\end{array} \\right.", 6],
            forkfour: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ #7 & \\mbox{#8}\\\\ \\end{array} \\right.", 8],
            vecthree: ["\\begin{bmatrix} #1\\\\ #2\\\\ #3 \\end{bmatrix}", 3],
            vecthreethree: ["\\begin{bmatrix} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{bmatrix}", 9],
            cameramatrix: ["#1 = \\begin{bmatrix} f_x & 0 & c_x\\\\ 0 & f_y & c_y\\\\ 0 & 0 & 1 \\end{bmatrix}", 1],
            distcoeffs: ["(k_1, k_2, p_1, p_2[, k_3[, k_4, k_5, k_6 [, s_1, s_2, s_3, s_4[, \\tau_x, \\tau_y]]]]) \\text{ of 4, 5, 8, 12 or 14 elements}"],
            distcoeffsfisheye: ["(k_1, k_2, k_3, k_4)"],
            hdotsfor: ["\\dots", 1],
            mathbbm: ["\\mathbb{#1}", 1],
            bordermatrix: ["\\matrix{#1}", 1]
        },
        processEscapes: false
    }
};
//]]>
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-chtml.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<!--#include virtual="/google-search.html"-->
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../opencv-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenCV
   &#160;<span id="projectnumber">4.10.0</span>
   </div>
   <div id="projectbrief">Open Source Computer Vision</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="headertitle"><div class="title">samples/cpp/stitching_detailed.cpp</div></div>
</div><!--header-->
<div class="contents">
<p>A detailed example on image stitching</p>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;string&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;opencv2/opencv_modules.hpp&quot;</span></div>
<div class="line"><span class="preprocessor">#include &lt;<a class="code" href="../../d1/d4e/utility_8hpp.html">opencv2/core/utility.hpp</a>&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d6/d87/imgcodecs_8hpp.html">opencv2/imgcodecs.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d4/dd5/highgui_8hpp.html">opencv2/highgui.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d3/d45/autocalib_8hpp.html">opencv2/stitching/detail/autocalib.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d9/d88/blenders_8hpp.html">opencv2/stitching/detail/blenders.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d8/d46/timelapsers_8hpp.html">opencv2/stitching/detail/timelapsers.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d0/d8a/camera_8hpp.html">opencv2/stitching/detail/camera.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../df/d70/exposure__compensate_8hpp.html">opencv2/stitching/detail/exposure_compensate.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d3/dc9/matchers_8hpp.html">opencv2/stitching/detail/matchers.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d3/d73/motion__estimators_8hpp.html">opencv2/stitching/detail/motion_estimators.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d74/seam__finders_8hpp.html">opencv2/stitching/detail/seam_finders.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../dc/de7/detail_2warpers_8hpp.html">opencv2/stitching/detail/warpers.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../da/d64/warpers_8hpp.html">opencv2/stitching/warpers.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#ifdef HAVE_OPENCV_XFEATURES2D</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../dc/daa/xfeatures2d_8hpp.html">opencv2/xfeatures2d.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="../../dc/dcb/nonfree_8hpp.html">opencv2/xfeatures2d/nonfree.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#define ENABLE_LOG 1</span></div>
<div class="line"><span class="preprocessor">#define LOG(msg) std::cout &lt;&lt; msg</span></div>
<div class="line"><span class="preprocessor">#define LOGLN(msg) std::cout &lt;&lt; msg &lt;&lt; std::endl</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d2/d75/namespacecv.html">cv</a>;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d2/daf/namespacecv_1_1detail.html">cv::detail</a>;</div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">void</span> printUsage(<span class="keywordtype">char</span>** argv)</div>
<div class="line">{</div>
<div class="line">    cout &lt;&lt;</div>
<div class="line">        <span class="stringliteral">&quot;Rotation model images stitcher.\n\n&quot;</span></div>
<div class="line">         &lt;&lt; argv[0] &lt;&lt; <span class="stringliteral">&quot; img1 img2 [...imgN] [flags]\n\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;Flags:\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --preview\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Run stitching in the preview mode. Works faster than usual mode,\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      but output image will have lower resolution.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --try_cuda (yes|no)\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Try to use CUDA. The default value is &#39;no&#39;. All default values\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      are for CPU mode.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;\nMotion Estimation Flags:\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --work_megapix &lt;float&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Resolution for image registration step. The default is 0.6 Mpx.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --features (surf|orb|sift|akaze)\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Type of features used for images matching.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      The default is surf if available, orb otherwise.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --matcher (homography|affine)\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Matcher used for pairwise image matching.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --estimator (homography|affine)\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Type of estimator used for transformation estimation.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --match_conf &lt;float&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Confidence for feature matching step. The default is 0.65 for surf and 0.3 for orb.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --conf_thresh &lt;float&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Threshold for two images are from the same panorama confidence.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      The default is 1.0.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --ba (no|reproj|ray|affine)\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Bundle adjustment cost function. The default is ray.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --ba_refine_mask (mask)\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Set refinement mask for bundle adjustment. It looks like &#39;x_xxx&#39;,\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      where &#39;x&#39; means refine respective parameter and &#39;_&#39; means don&#39;t\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      refine one, and has the following format:\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      &lt;fx&gt;&lt;skew&gt;&lt;ppx&gt;&lt;aspect&gt;&lt;ppy&gt;. The default mask is &#39;xxxxx&#39;. If bundle\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      adjustment doesn&#39;t support estimation of selected parameter then\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      the respective flag is ignored.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --wave_correct (no|horiz|vert)\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Perform wave effect correction. The default is &#39;horiz&#39;.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --save_graph &lt;file_name&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Save matches graph represented in DOT language to &lt;file_name&gt; file.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Labels description: Nm is number of matches, Ni is number of inliers,\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      C is confidence.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;\nCompositing Flags:\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --warp (affine|plane|cylindrical|spherical|fisheye|stereographic|compressedPlaneA2B1|compressedPlaneA1.5B1|compressedPlanePortraitA2B1|compressedPlanePortraitA1.5B1|paniniA2B1|paniniA1.5B1|paniniPortraitA2B1|paniniPortraitA1.5B1|mercator|transverseMercator)\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Warp surface type. The default is &#39;spherical&#39;.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --seam_megapix &lt;float&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Resolution for seam estimation step. The default is 0.1 Mpx.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --seam (no|voronoi|gc_color|gc_colorgrad)\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Seam estimation method. The default is &#39;gc_color&#39;.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --compose_megapix &lt;float&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Resolution for compositing step. Use -1 for original resolution.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      The default is -1.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --expos_comp (no|gain|gain_blocks|channels|channels_blocks)\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Exposure compensation method. The default is &#39;gain_blocks&#39;.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --expos_comp_nr_feeds &lt;int&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Number of exposure compensation feed. The default is 1.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --expos_comp_nr_filtering &lt;int&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Number of filtering iterations of the exposure compensation gains.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Only used when using a block exposure compensation method.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      The default is 2.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --expos_comp_block_size &lt;int&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      BLock size in pixels used by the exposure compensator.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Only used when using a block exposure compensation method.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      The default is 32.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --blend (no|feather|multiband)\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Blending method. The default is &#39;multiband&#39;.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --blend_strength &lt;float&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Blending strength from [0,100] range. The default is 5.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --output &lt;result_img&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      The default is &#39;result.jpg&#39;.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --timelapse (as_is|crop) \n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      Output warped images separately as frames of a time lapse movie, with &#39;fixed_&#39; prepended to input file names.\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;  --rangewidth &lt;int&gt;\n&quot;</span></div>
<div class="line">        <span class="stringliteral">&quot;      uses range_width to limit number of images to match with.\n&quot;</span>;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="comment">// Default command line args</span></div>
<div class="line">vector&lt;String&gt; img_names;</div>
<div class="line"><span class="keywordtype">bool</span> preview = <span class="keyword">false</span>;</div>
<div class="line"><span class="keywordtype">bool</span> try_cuda = <span class="keyword">false</span>;</div>
<div class="line"><span class="keywordtype">double</span> work_megapix = 0.6;</div>
<div class="line"><span class="keywordtype">double</span> seam_megapix = 0.1;</div>
<div class="line"><span class="keywordtype">double</span> compose_megapix = -1;</div>
<div class="line"><span class="keywordtype">float</span> conf_thresh = 1.f;</div>
<div class="line"><span class="preprocessor">#ifdef HAVE_OPENCV_XFEATURES2D</span></div>
<div class="line"><span class="keywordtype">string</span> features_type = <span class="stringliteral">&quot;surf&quot;</span>;</div>
<div class="line"><span class="keywordtype">float</span> match_conf = 0.65f;</div>
<div class="line"><span class="preprocessor">#else</span></div>
<div class="line"><span class="keywordtype">string</span> features_type = <span class="stringliteral">&quot;orb&quot;</span>;</div>
<div class="line"><span class="keywordtype">float</span> match_conf = 0.3f;</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"><span class="keywordtype">string</span> matcher_type = <span class="stringliteral">&quot;homography&quot;</span>;</div>
<div class="line"><span class="keywordtype">string</span> estimator_type = <span class="stringliteral">&quot;homography&quot;</span>;</div>
<div class="line"><span class="keywordtype">string</span> ba_cost_func = <span class="stringliteral">&quot;ray&quot;</span>;</div>
<div class="line"><span class="keywordtype">string</span> ba_refine_mask = <span class="stringliteral">&quot;xxxxx&quot;</span>;</div>
<div class="line"><span class="keywordtype">bool</span> do_wave_correct = <span class="keyword">true</span>;</div>
<div class="line"><a class="code hl_enumeration" href="../../d7/d74/group__stitching__rotation.html#ga83b24d4c3e93584986a56d9e43b9cf7f">WaveCorrectKind</a> wave_correct = detail::WAVE_CORRECT_HORIZ;</div>
<div class="line"><span class="keywordtype">bool</span> save_graph = <span class="keyword">false</span>;</div>
<div class="line">std::string save_graph_to;</div>
<div class="line"><span class="keywordtype">string</span> warp_type = <span class="stringliteral">&quot;spherical&quot;</span>;</div>
<div class="line"><span class="keywordtype">int</span> expos_comp_type = ExposureCompensator::GAIN_BLOCKS;</div>
<div class="line"><span class="keywordtype">int</span> expos_comp_nr_feeds = 1;</div>
<div class="line"><span class="keywordtype">int</span> expos_comp_nr_filtering = 2;</div>
<div class="line"><span class="keywordtype">int</span> expos_comp_block_size = 32;</div>
<div class="line"><span class="keywordtype">string</span> seam_find_type = <span class="stringliteral">&quot;gc_color&quot;</span>;</div>
<div class="line"><span class="keywordtype">int</span> blend_type = Blender::MULTI_BAND;</div>
<div class="line"><span class="keywordtype">int</span> timelapse_type = Timelapser::AS_IS;</div>
<div class="line"><span class="keywordtype">float</span> blend_strength = 5;</div>
<div class="line"><span class="keywordtype">string</span> result_name = <span class="stringliteral">&quot;result.jpg&quot;</span>;</div>
<div class="line"><span class="keywordtype">bool</span> timelapse = <span class="keyword">false</span>;</div>
<div class="line"><span class="keywordtype">int</span> range_width = -1;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">static</span> <span class="keywordtype">int</span> parseCmdArgs(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv)</div>
<div class="line">{</div>
<div class="line">    <span class="keywordflow">if</span> (argc == 1)</div>
<div class="line">    {</div>
<div class="line">        printUsage(argv);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 1; i &lt; argc; ++i)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--help&quot;</span> || <span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;/?&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            printUsage(argv);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--preview&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            preview = <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--try_cuda&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;no&quot;</span>)</div>
<div class="line">                try_cuda = <span class="keyword">false</span>;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;yes&quot;</span>)</div>
<div class="line">                try_cuda = <span class="keyword">true</span>;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Bad --try_cuda flag value\n&quot;</span>;</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--work_megapix&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            work_megapix = atof(argv[i + 1]);</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--seam_megapix&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            seam_megapix = atof(argv[i + 1]);</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--compose_megapix&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            compose_megapix = atof(argv[i + 1]);</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--result&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            result_name = argv[i + 1];</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--features&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            features_type = argv[i + 1];</div>
<div class="line">            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(features_type) == <span class="stringliteral">&quot;orb&quot;</span>)</div>
<div class="line">                match_conf = 0.3f;</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--matcher&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;homography&quot;</span> || <span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;affine&quot;</span>)</div>
<div class="line">                matcher_type = argv[i + 1];</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Bad --matcher flag value\n&quot;</span>;</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--estimator&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;homography&quot;</span> || <span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;affine&quot;</span>)</div>
<div class="line">                estimator_type = argv[i + 1];</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Bad --estimator flag value\n&quot;</span>;</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--match_conf&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            match_conf = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(atof(argv[i + 1]));</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--conf_thresh&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            conf_thresh = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(atof(argv[i + 1]));</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--ba&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            ba_cost_func = argv[i + 1];</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--ba_refine_mask&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            ba_refine_mask = argv[i + 1];</div>
<div class="line">            <span class="keywordflow">if</span> (ba_refine_mask.size() != 5)</div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Incorrect refinement mask length.\n&quot;</span>;</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--wave_correct&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;no&quot;</span>)</div>
<div class="line">                do_wave_correct = <span class="keyword">false</span>;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;horiz&quot;</span>)</div>
<div class="line">            {</div>
<div class="line">                do_wave_correct = <span class="keyword">true</span>;</div>
<div class="line">                wave_correct = detail::WAVE_CORRECT_HORIZ;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;vert&quot;</span>)</div>
<div class="line">            {</div>
<div class="line">                do_wave_correct = <span class="keyword">true</span>;</div>
<div class="line">                wave_correct = detail::WAVE_CORRECT_VERT;</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Bad --wave_correct flag value\n&quot;</span>;</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--save_graph&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            save_graph = <span class="keyword">true</span>;</div>
<div class="line">            save_graph_to = argv[i + 1];</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--warp&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            warp_type = string(argv[i + 1]);</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--expos_comp&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;no&quot;</span>)</div>
<div class="line">                expos_comp_type = ExposureCompensator::NO;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;gain&quot;</span>)</div>
<div class="line">                expos_comp_type = ExposureCompensator::GAIN;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;gain_blocks&quot;</span>)</div>
<div class="line">                expos_comp_type = ExposureCompensator::GAIN_BLOCKS;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;channels&quot;</span>)</div>
<div class="line">                expos_comp_type = ExposureCompensator::CHANNELS;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;channels_blocks&quot;</span>)</div>
<div class="line">                expos_comp_type = ExposureCompensator::CHANNELS_BLOCKS;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Bad exposure compensation method\n&quot;</span>;</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--expos_comp_nr_feeds&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            expos_comp_nr_feeds = atoi(argv[i + 1]);</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--expos_comp_nr_filtering&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            expos_comp_nr_filtering = atoi(argv[i + 1]);</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--expos_comp_block_size&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            expos_comp_block_size = atoi(argv[i + 1]);</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--seam&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;no&quot;</span> ||</div>
<div class="line">                <span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;voronoi&quot;</span> ||</div>
<div class="line">                <span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;gc_color&quot;</span> ||</div>
<div class="line">                <span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;gc_colorgrad&quot;</span> ||</div>
<div class="line">                <span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;dp_color&quot;</span> ||</div>
<div class="line">                <span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;dp_colorgrad&quot;</span>)</div>
<div class="line">                seam_find_type = argv[i + 1];</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Bad seam finding method\n&quot;</span>;</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--blend&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;no&quot;</span>)</div>
<div class="line">                blend_type = Blender::NO;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;feather&quot;</span>)</div>
<div class="line">                blend_type = Blender::FEATHER;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;multiband&quot;</span>)</div>
<div class="line">                blend_type = Blender::MULTI_BAND;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Bad blending method\n&quot;</span>;</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--timelapse&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            timelapse = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;as_is&quot;</span>)</div>
<div class="line">                timelapse_type = Timelapser::AS_IS;</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i + 1]) == <span class="stringliteral">&quot;crop&quot;</span>)</div>
<div class="line">                timelapse_type = Timelapser::CROP;</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                cout &lt;&lt; <span class="stringliteral">&quot;Bad timelapse method\n&quot;</span>;</div>
<div class="line">                <span class="keywordflow">return</span> -1;</div>
<div class="line">            }</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--rangewidth&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            range_width = atoi(argv[i + 1]);</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--blend_strength&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            blend_strength = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(atof(argv[i + 1]));</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<span class="keywordtype">string</span>(argv[i]) == <span class="stringliteral">&quot;--output&quot;</span>)</div>
<div class="line">        {</div>
<div class="line">            result_name = argv[i + 1];</div>
<div class="line">            i++;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            img_names.push_back(argv[i]);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">if</span> (preview)</div>
<div class="line">    {</div>
<div class="line">        compose_megapix = 0.6;</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a id="a0" name="a0"></a><a class="code hl_function" href="../../dc/d89/highgui__qt_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>* argv[])</div>
<div class="line">{</div>
<div class="line"><span class="preprocessor">#if ENABLE_LOG</span></div>
<div class="line">    <a class="code hl_typedef" href="../../d1/d1b/group__core__hal__interface.html#ga7cde0074dfd288f2d70c0e035dacb28a">int64</a> app_start_time = <a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line"><span class="preprocessor">#if 0</span></div>
<div class="line">    <a id="a1" name="a1"></a><a class="code hl_function" href="../../db/de0/group__core__utils.html#gae4904ef072dede53cf161d9a6869083f">cv::setBreakOnError</a>(<span class="keyword">true</span>);</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">int</span> retval = parseCmdArgs(argc, argv);</div>
<div class="line">    <span class="keywordflow">if</span> (retval)</div>
<div class="line">        <span class="keywordflow">return</span> retval;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check if have enough images</span></div>
<div class="line">    <span class="keywordtype">int</span> num_images = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(img_names.size());</div>
<div class="line">    <span class="keywordflow">if</span> (num_images &lt; 2)</div>
<div class="line">    {</div>
<div class="line">        LOGLN(<span class="stringliteral">&quot;Need more images&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">double</span> work_scale = 1, seam_scale = 1, compose_scale = 1;</div>
<div class="line">    <span class="keywordtype">bool</span> is_work_scale_set = <span class="keyword">false</span>, is_seam_scale_set = <span class="keyword">false</span>, is_compose_scale_set = <span class="keyword">false</span>;</div>
<div class="line"> </div>
<div class="line">    LOGLN(<span class="stringliteral">&quot;Finding features...&quot;</span>);</div>
<div class="line"><span class="preprocessor">#if ENABLE_LOG</span></div>
<div class="line">    <a class="code hl_typedef" href="../../d1/d1b/group__core__hal__interface.html#ga7cde0074dfd288f2d70c0e035dacb28a">int64</a> t = <a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga6395ca871a678020c4a31fadf7e8cc63">Ptr&lt;Feature2D&gt;</a> finder;</div>
<div class="line">    <span class="keywordflow">if</span> (features_type == <span class="stringliteral">&quot;orb&quot;</span>)</div>
<div class="line">    {</div>
<div class="line">        finder = ORB::create();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (features_type == <span class="stringliteral">&quot;akaze&quot;</span>)</div>
<div class="line">    {</div>
<div class="line">        finder = AKAZE::create();</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#ifdef HAVE_OPENCV_XFEATURES2D</span></div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (features_type == <span class="stringliteral">&quot;surf&quot;</span>)</div>
<div class="line">    {</div>
<div class="line">        finder = xfeatures2d::SURF::create();</div>
<div class="line">    }</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (features_type == <span class="stringliteral">&quot;sift&quot;</span>)</div>
<div class="line">    {</div>
<div class="line">        finder = SIFT::create();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Unknown 2D features type: &#39;&quot;</span> &lt;&lt; features_type &lt;&lt; <span class="stringliteral">&quot;&#39;.\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a id="_a2" name="_a2"></a><a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> full_img, img;</div>
<div class="line">    vector&lt;ImageFeatures&gt; features(num_images);</div>
<div class="line">    vector&lt;Mat&gt; images(num_images);</div>
<div class="line">    vector&lt;Size&gt; full_img_sizes(num_images);</div>
<div class="line">    <span class="keywordtype">double</span> seam_work_aspect = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_images; ++i)</div>
<div class="line">    {</div>
<div class="line">        full_img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gab32ee19e22660912565f8140d0f675a8">imread</a>(samples::findFile(img_names[i]));</div>
<div class="line">        full_img_sizes[i] = full_img.<a id="a3" name="a3"></a><a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#a146f8e8dda07d1365a575ab83d9828d1">size</a>();</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (full_img.<a id="a4" name="a4"></a><a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#abbec3525a852e77998aba034813fded4">empty</a>())</div>
<div class="line">        {</div>
<div class="line">            LOGLN(<span class="stringliteral">&quot;Can&#39;t open image &quot;</span> &lt;&lt; img_names[i]);</div>
<div class="line">            <span class="keywordflow">return</span> -1;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (work_megapix &lt; 0)</div>
<div class="line">        {</div>
<div class="line">            img = full_img;</div>
<div class="line">            work_scale = 1;</div>
<div class="line">            is_work_scale_set = <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (!is_work_scale_set)</div>
<div class="line">            {</div>
<div class="line">                work_scale = <a class="code hl_function" href="../../d2/de8/group__core__array.html#ga9af368f182ee76d0463d0d8d5330b764">min</a>(1.0, <a class="code hl_function" href="../../d2/de8/group__core__array.html#ga186222c3919657890f88df5a1f64a7d7">sqrt</a>(work_megapix * 1e6 / full_img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#a146f8e8dda07d1365a575ab83d9828d1">size</a>().area()));</div>
<div class="line">                is_work_scale_set = <span class="keyword">true</span>;</div>
<div class="line">            }</div>
<div class="line">            <a class="code hl_function" href="../../da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">resize</a>(full_img, img, <a id="_a5" name="_a5"></a><a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>(), work_scale, work_scale, INTER_LINEAR_EXACT);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (!is_seam_scale_set)</div>
<div class="line">        {</div>
<div class="line">            seam_scale = <a class="code hl_function" href="../../d2/de8/group__core__array.html#ga9af368f182ee76d0463d0d8d5330b764">min</a>(1.0, <a class="code hl_function" href="../../d2/de8/group__core__array.html#ga186222c3919657890f88df5a1f64a7d7">sqrt</a>(seam_megapix * 1e6 / full_img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#a146f8e8dda07d1365a575ab83d9828d1">size</a>().area()));</div>
<div class="line">            seam_work_aspect = seam_scale / work_scale;</div>
<div class="line">            is_seam_scale_set = <span class="keyword">true</span>;</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="../../df/d8c/group__stitching__match.html#ga1e4ca67941780b89a36003eed2bb476e">computeImageFeatures</a>(finder, img, features[i]);</div>
<div class="line">        features[i].img_idx = i;</div>
<div class="line">        LOGLN(<span class="stringliteral">&quot;Features in image #&quot;</span> &lt;&lt; i+1 &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; features[i].keypoints.size());</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="../../da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">resize</a>(full_img, img, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>(), seam_scale, seam_scale, INTER_LINEAR_EXACT);</div>
<div class="line">        images[i] = img.<a id="a6" name="a6"></a><a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#a03d2a2570d06dcae378f788725789aa4">clone</a>();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    full_img.<a id="a7" name="a7"></a><a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#ae48d4913285518e2c21a3457017e716e">release</a>();</div>
<div class="line">    img.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#ae48d4913285518e2c21a3457017e716e">release</a>();</div>
<div class="line"> </div>
<div class="line">    LOGLN(<span class="stringliteral">&quot;Finding features, time: &quot;</span> &lt;&lt; ((<a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>() - t) / <a class="code hl_function" href="../../db/de0/group__core__utils.html#ga705441a9ef01f47acdc55d87fbe5090c">getTickFrequency</a>()) &lt;&lt; <span class="stringliteral">&quot; sec&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    LOG(<span class="stringliteral">&quot;Pairwise matching&quot;</span>);</div>
<div class="line"><span class="preprocessor">#if ENABLE_LOG</span></div>
<div class="line">    t = <a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    vector&lt;MatchesInfo&gt; pairwise_matches;</div>
<div class="line">    <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga6395ca871a678020c4a31fadf7e8cc63">Ptr&lt;FeaturesMatcher&gt;</a> matcher;</div>
<div class="line">    <span class="keywordflow">if</span> (matcher_type == <span class="stringliteral">&quot;affine&quot;</span>)</div>
<div class="line">        matcher = makePtr&lt;AffineBestOf2NearestMatcher&gt;(<span class="keyword">false</span>, try_cuda, match_conf);</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (range_width==-1)</div>
<div class="line">        matcher = makePtr&lt;BestOf2NearestMatcher&gt;(try_cuda, match_conf);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        matcher = makePtr&lt;BestOf2NearestRangeMatcher&gt;(range_width, try_cuda, match_conf);</div>
<div class="line"> </div>
<div class="line">    (*matcher)(features, pairwise_matches);</div>
<div class="line">    matcher-&gt;collectGarbage();</div>
<div class="line"> </div>
<div class="line">    LOGLN(<span class="stringliteral">&quot;Pairwise matching, time: &quot;</span> &lt;&lt; ((<a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>() - t) / <a class="code hl_function" href="../../db/de0/group__core__utils.html#ga705441a9ef01f47acdc55d87fbe5090c">getTickFrequency</a>()) &lt;&lt; <span class="stringliteral">&quot; sec&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check if we should save matches graph</span></div>
<div class="line">    <span class="keywordflow">if</span> (save_graph)</div>
<div class="line">    {</div>
<div class="line">        LOGLN(<span class="stringliteral">&quot;Saving matches graph...&quot;</span>);</div>
<div class="line">        ofstream f(save_graph_to.c_str());</div>
<div class="line">        f &lt;&lt; <a class="code hl_function" href="../../d7/d74/group__stitching__rotation.html#ga7f097123be3e2a782468c1e302e9332a">matchesGraphAsString</a>(img_names, pairwise_matches, conf_thresh);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Leave only images we are sure are from the same panorama</span></div>
<div class="line">    vector&lt;int&gt; indices = <a class="code hl_function" href="../../d7/d74/group__stitching__rotation.html#ga4a6e7887e96c3665053c4b2a64efe872">leaveBiggestComponent</a>(features, pairwise_matches, conf_thresh);</div>
<div class="line">    vector&lt;Mat&gt; img_subset;</div>
<div class="line">    vector&lt;String&gt; img_names_subset;</div>
<div class="line">    vector&lt;Size&gt; full_img_sizes_subset;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; indices.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        img_names_subset.push_back(img_names[indices[i]]);</div>
<div class="line">        img_subset.push_back(images[indices[i]]);</div>
<div class="line">        full_img_sizes_subset.push_back(full_img_sizes[indices[i]]);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    images = img_subset;</div>
<div class="line">    img_names = img_names_subset;</div>
<div class="line">    full_img_sizes = full_img_sizes_subset;</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Check if we still have enough images</span></div>
<div class="line">    num_images = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(img_names.size());</div>
<div class="line">    <span class="keywordflow">if</span> (num_images &lt; 2)</div>
<div class="line">    {</div>
<div class="line">        LOGLN(<span class="stringliteral">&quot;Need more images&quot;</span>);</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga6395ca871a678020c4a31fadf7e8cc63">Ptr&lt;Estimator&gt;</a> estimator;</div>
<div class="line">    <span class="keywordflow">if</span> (estimator_type == <span class="stringliteral">&quot;affine&quot;</span>)</div>
<div class="line">        estimator = makePtr&lt;AffineBasedEstimator&gt;();</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        estimator = makePtr&lt;HomographyBasedEstimator&gt;();</div>
<div class="line"> </div>
<div class="line">    vector&lt;CameraParams&gt; cameras;</div>
<div class="line">    <span class="keywordflow">if</span> (!(*estimator)(features, pairwise_matches, cameras))</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Homography estimation failed.\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; cameras.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> R;</div>
<div class="line">        cameras[i].R.<a id="a8" name="a8"></a><a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#adf88c60c5b4980e05bb556080916978b">convertTo</a>(R, <a id="a9" name="a9"></a><a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga4a3def5d72b74bed31f5f8ab7676099c">CV_32F</a>);</div>
<div class="line">        cameras[i].R = R;</div>
<div class="line">        LOGLN(<span class="stringliteral">&quot;Initial camera intrinsics #&quot;</span> &lt;&lt; indices[i]+1 &lt;&lt; <span class="stringliteral">&quot;:\nK:\n&quot;</span> &lt;&lt; cameras[i].K() &lt;&lt; <span class="stringliteral">&quot;\nR:\n&quot;</span> &lt;&lt; cameras[i].R);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga6395ca871a678020c4a31fadf7e8cc63">Ptr&lt;detail::BundleAdjusterBase&gt;</a> adjuster;</div>
<div class="line">    <span class="keywordflow">if</span> (ba_cost_func == <span class="stringliteral">&quot;reproj&quot;</span>) adjuster = makePtr&lt;detail::BundleAdjusterReproj&gt;();</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ba_cost_func == <span class="stringliteral">&quot;ray&quot;</span>) adjuster = makePtr&lt;detail::BundleAdjusterRay&gt;();</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ba_cost_func == <span class="stringliteral">&quot;affine&quot;</span>) adjuster = makePtr&lt;detail::BundleAdjusterAffinePartial&gt;();</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ba_cost_func == <span class="stringliteral">&quot;no&quot;</span>) adjuster = makePtr&lt;NoBundleAdjuster&gt;();</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Unknown bundle adjustment cost function: &#39;&quot;</span> &lt;&lt; ba_cost_func &lt;&lt; <span class="stringliteral">&quot;&#39;.\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line">    adjuster-&gt;setConfThresh(conf_thresh);</div>
<div class="line">    <a id="_a10" name="_a10"></a><a class="code hl_class" href="../../df/dfc/classcv_1_1Mat__.html">Mat_&lt;uchar&gt;</a> refine_mask = Mat::zeros(3, 3, <a id="a11" name="a11"></a><a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga32b18d904ee2b1731a9416a8eef67d06">CV_8U</a>);</div>
<div class="line">    <span class="keywordflow">if</span> (ba_refine_mask[0] == <span class="charliteral">&#39;x&#39;</span>) refine_mask(0,0) = 1;</div>
<div class="line">    <span class="keywordflow">if</span> (ba_refine_mask[1] == <span class="charliteral">&#39;x&#39;</span>) refine_mask(0,1) = 1;</div>
<div class="line">    <span class="keywordflow">if</span> (ba_refine_mask[2] == <span class="charliteral">&#39;x&#39;</span>) refine_mask(0,2) = 1;</div>
<div class="line">    <span class="keywordflow">if</span> (ba_refine_mask[3] == <span class="charliteral">&#39;x&#39;</span>) refine_mask(1,1) = 1;</div>
<div class="line">    <span class="keywordflow">if</span> (ba_refine_mask[4] == <span class="charliteral">&#39;x&#39;</span>) refine_mask(1,2) = 1;</div>
<div class="line">    adjuster-&gt;setRefinementMask(refine_mask);</div>
<div class="line">    <span class="keywordflow">if</span> (!(*adjuster)(features, pairwise_matches, cameras))</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Camera parameters adjusting failed.\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> -1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Find median focal length</span></div>
<div class="line"> </div>
<div class="line">    vector&lt;double&gt; focals;</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; cameras.size(); ++i)</div>
<div class="line">    {</div>
<div class="line">        LOGLN(<span class="stringliteral">&quot;Camera #&quot;</span> &lt;&lt; indices[i]+1 &lt;&lt; <span class="stringliteral">&quot;:\nK:\n&quot;</span> &lt;&lt; cameras[i].K() &lt;&lt; <span class="stringliteral">&quot;\nR:\n&quot;</span> &lt;&lt; cameras[i].R);</div>
<div class="line">        focals.push_back(cameras[i].focal);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_function" href="../../d2/de8/group__core__array.html#ga45dd56da289494ce874be2324856898f">sort</a>(focals.begin(), focals.end());</div>
<div class="line">    <span class="keywordtype">float</span> warped_image_scale;</div>
<div class="line">    <span class="keywordflow">if</span> (focals.size() % 2 == 1)</div>
<div class="line">        warped_image_scale = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(focals[focals.size() / 2]);</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line">        warped_image_scale = <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(focals[focals.size() / 2 - 1] + focals[focals.size() / 2]) * 0.5f;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (do_wave_correct)</div>
<div class="line">    {</div>
<div class="line">        vector&lt;Mat&gt; rmats;</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; cameras.size(); ++i)</div>
<div class="line">            rmats.push_back(cameras[i].R.clone());</div>
<div class="line">        <a class="code hl_function" href="../../d7/d74/group__stitching__rotation.html#ga8faf9588aebd5aeb6f8c649c82beb1fb">waveCorrect</a>(rmats, wave_correct);</div>
<div class="line">        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 0; i &lt; cameras.size(); ++i)</div>
<div class="line">            cameras[i].R = rmats[i];</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    LOGLN(<span class="stringliteral">&quot;Warping images (auxiliary)... &quot;</span>);</div>
<div class="line"><span class="preprocessor">#if ENABLE_LOG</span></div>
<div class="line">    t = <a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    vector&lt;Point&gt; corners(num_images);</div>
<div class="line">    vector&lt;UMat&gt; masks_warped(num_images);</div>
<div class="line">    vector&lt;UMat&gt; images_warped(num_images);</div>
<div class="line">    vector&lt;Size&gt; sizes(num_images);</div>
<div class="line">    vector&lt;UMat&gt; masks(num_images);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Prepare images masks</span></div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_images; ++i)</div>
<div class="line">    {</div>
<div class="line">        masks[i].create(images[i].<a class="code hl_function" href="../../df/d5b/namespacecv_1_1gapi_1_1streaming.html#abc5db6c129a4ea2177b3bfce576d9499">size</a>(), <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga32b18d904ee2b1731a9416a8eef67d06">CV_8U</a>);</div>
<div class="line">        masks[i].setTo(Scalar::all(255));</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Warp images and their masks</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga6395ca871a678020c4a31fadf7e8cc63">Ptr&lt;WarperCreator&gt;</a> warper_creator;</div>
<div class="line"><span class="preprocessor">#ifdef HAVE_OPENCV_CUDAWARPING</span></div>
<div class="line">    <span class="keywordflow">if</span> (try_cuda &amp;&amp; cuda::getCudaEnabledDeviceCount() &gt; 0)</div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;plane&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::PlaneWarperGpu&gt;();</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;cylindrical&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::CylindricalWarperGpu&gt;();</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;spherical&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::SphericalWarperGpu&gt;();</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">    {</div>
<div class="line">        <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;plane&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::PlaneWarper&gt;();</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;affine&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::AffineWarper&gt;();</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;cylindrical&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::CylindricalWarper&gt;();</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;spherical&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::SphericalWarper&gt;();</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;fisheye&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::FisheyeWarper&gt;();</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;stereographic&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::StereographicWarper&gt;();</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;compressedPlaneA2B1&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::CompressedRectilinearWarper&gt;(2.0f, 1.0f);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;compressedPlaneA1.5B1&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::CompressedRectilinearWarper&gt;(1.5f, 1.0f);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;compressedPlanePortraitA2B1&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::CompressedRectilinearPortraitWarper&gt;(2.0f, 1.0f);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;compressedPlanePortraitA1.5B1&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::CompressedRectilinearPortraitWarper&gt;(1.5f, 1.0f);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;paniniA2B1&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::PaniniWarper&gt;(2.0f, 1.0f);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;paniniA1.5B1&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::PaniniWarper&gt;(1.5f, 1.0f);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;paniniPortraitA2B1&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::PaniniPortraitWarper&gt;(2.0f, 1.0f);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;paniniPortraitA1.5B1&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::PaniniPortraitWarper&gt;(1.5f, 1.0f);</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;mercator&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::MercatorWarper&gt;();</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (warp_type == <span class="stringliteral">&quot;transverseMercator&quot;</span>)</div>
<div class="line">            warper_creator = makePtr&lt;cv::TransverseMercatorWarper&gt;();</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!warper_creator)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Can&#39;t create the following warper &#39;&quot;</span> &lt;&lt; warp_type &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga6395ca871a678020c4a31fadf7e8cc63">Ptr&lt;RotationWarper&gt;</a> warper = warper_creator-&gt;create(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(warped_image_scale * seam_work_aspect));</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_images; ++i)</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="../../df/dfc/classcv_1_1Mat__.html">Mat_&lt;float&gt;</a> K;</div>
<div class="line">        cameras[i].K().<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#adf88c60c5b4980e05bb556080916978b">convertTo</a>(K, <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga4a3def5d72b74bed31f5f8ab7676099c">CV_32F</a>);</div>
<div class="line">        <span class="keywordtype">float</span> swa = (float)seam_work_aspect;</div>
<div class="line">        K(0,0) *= swa; K(0,2) *= swa;</div>
<div class="line">        K(1,1) *= swa; K(1,2) *= swa;</div>
<div class="line"> </div>
<div class="line">        corners[i] = warper-&gt;warp(images[i], K, cameras[i].R, INTER_LINEAR, BORDER_REFLECT, images_warped[i]);</div>
<div class="line">        sizes[i] = images_warped[i].<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#a146f8e8dda07d1365a575ab83d9828d1">size</a>();</div>
<div class="line"> </div>
<div class="line">        warper-&gt;warp(masks[i], K, cameras[i].R, INTER_NEAREST, BORDER_CONSTANT, masks_warped[i]);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    vector&lt;UMat&gt; images_warped_f(num_images);</div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_images; ++i)</div>
<div class="line">        images_warped[i].<a class="code hl_function" href="../../d6/d91/group__gapi__transform.html#gae972b2c91904d36e92ee14a6778db82e">convertTo</a>(images_warped_f[i], <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga4a3def5d72b74bed31f5f8ab7676099c">CV_32F</a>);</div>
<div class="line"> </div>
<div class="line">    LOGLN(<span class="stringliteral">&quot;Warping images, time: &quot;</span> &lt;&lt; ((<a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>() - t) / <a class="code hl_function" href="../../db/de0/group__core__utils.html#ga705441a9ef01f47acdc55d87fbe5090c">getTickFrequency</a>()) &lt;&lt; <span class="stringliteral">&quot; sec&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    LOGLN(<span class="stringliteral">&quot;Compensating exposure...&quot;</span>);</div>
<div class="line"><span class="preprocessor">#if ENABLE_LOG</span></div>
<div class="line">    t = <a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga6395ca871a678020c4a31fadf7e8cc63">Ptr&lt;ExposureCompensator&gt;</a> compensator = ExposureCompensator::createDefault(expos_comp_type);</div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keyword">dynamic_cast&lt;</span><a id="_a12" name="_a12"></a><a class="code hl_class" href="../../d0/de1/classcv_1_1detail_1_1GainCompensator.html">GainCompensator</a>*<span class="keyword">&gt;</span>(compensator.get()))</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="../../d0/de1/classcv_1_1detail_1_1GainCompensator.html">GainCompensator</a>* gcompensator = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="../../d0/de1/classcv_1_1detail_1_1GainCompensator.html">GainCompensator</a>*<span class="keyword">&gt;</span>(compensator.get());</div>
<div class="line">        gcompensator-&gt;<a id="a13" name="a13"></a><a class="code hl_function" href="../../d0/de1/classcv_1_1detail_1_1GainCompensator.html#aa1b612c1f334592c084cdf057ce15805">setNrFeeds</a>(expos_comp_nr_feeds);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keyword">dynamic_cast&lt;</span><a id="_a14" name="_a14"></a><a class="code hl_class" href="../../d4/ddd/classcv_1_1detail_1_1ChannelsCompensator.html">ChannelsCompensator</a>*<span class="keyword">&gt;</span>(compensator.get()))</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="../../d4/ddd/classcv_1_1detail_1_1ChannelsCompensator.html">ChannelsCompensator</a>* ccompensator = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="../../d4/ddd/classcv_1_1detail_1_1ChannelsCompensator.html">ChannelsCompensator</a>*<span class="keyword">&gt;</span>(compensator.get());</div>
<div class="line">        ccompensator-&gt;<a id="a15" name="a15"></a><a class="code hl_function" href="../../d4/ddd/classcv_1_1detail_1_1ChannelsCompensator.html#a0e88972a7011b2a112e4fe20346d4f35">setNrFeeds</a>(expos_comp_nr_feeds);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (<span class="keyword">dynamic_cast&lt;</span><a id="_a16" name="_a16"></a><a class="code hl_class" href="../../da/df4/classcv_1_1detail_1_1BlocksCompensator.html">BlocksCompensator</a>*<span class="keyword">&gt;</span>(compensator.get()))</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="../../da/df4/classcv_1_1detail_1_1BlocksCompensator.html">BlocksCompensator</a>* bcompensator = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="../../da/df4/classcv_1_1detail_1_1BlocksCompensator.html">BlocksCompensator</a>*<span class="keyword">&gt;</span>(compensator.get());</div>
<div class="line">        bcompensator-&gt;<a id="a17" name="a17"></a><a class="code hl_function" href="../../da/df4/classcv_1_1detail_1_1BlocksCompensator.html#a2764dddb47b321b5c66b33b28f4e8571">setNrFeeds</a>(expos_comp_nr_feeds);</div>
<div class="line">        bcompensator-&gt;<a id="a18" name="a18"></a><a class="code hl_function" href="../../da/df4/classcv_1_1detail_1_1BlocksCompensator.html#a96056be42faacbbc90c88d1a933f732c">setNrGainsFilteringIterations</a>(expos_comp_nr_filtering);</div>
<div class="line">        bcompensator-&gt;<a id="a19" name="a19"></a><a class="code hl_function" href="../../da/df4/classcv_1_1detail_1_1BlocksCompensator.html#a2100042d80ccf54b18d6513afff5a731">setBlockSize</a>(expos_comp_block_size, expos_comp_block_size);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    compensator-&gt;feed(corners, images_warped, masks_warped);</div>
<div class="line"> </div>
<div class="line">    LOGLN(<span class="stringliteral">&quot;Compensating exposure, time: &quot;</span> &lt;&lt; ((<a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>() - t) / <a class="code hl_function" href="../../db/de0/group__core__utils.html#ga705441a9ef01f47acdc55d87fbe5090c">getTickFrequency</a>()) &lt;&lt; <span class="stringliteral">&quot; sec&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    LOGLN(<span class="stringliteral">&quot;Finding seams...&quot;</span>);</div>
<div class="line"><span class="preprocessor">#if ENABLE_LOG</span></div>
<div class="line">    t = <a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga6395ca871a678020c4a31fadf7e8cc63">Ptr&lt;SeamFinder&gt;</a> seam_finder;</div>
<div class="line">    <span class="keywordflow">if</span> (seam_find_type == <span class="stringliteral">&quot;no&quot;</span>)</div>
<div class="line">        seam_finder = makePtr&lt;detail::NoSeamFinder&gt;();</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seam_find_type == <span class="stringliteral">&quot;voronoi&quot;</span>)</div>
<div class="line">        seam_finder = makePtr&lt;detail::VoronoiSeamFinder&gt;();</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seam_find_type == <span class="stringliteral">&quot;gc_color&quot;</span>)</div>
<div class="line">    {</div>
<div class="line"><span class="preprocessor">#ifdef HAVE_OPENCV_CUDALEGACY</span></div>
<div class="line">        <span class="keywordflow">if</span> (try_cuda &amp;&amp; cuda::getCudaEnabledDeviceCount() &gt; 0)</div>
<div class="line">            seam_finder = makePtr&lt;detail::GraphCutSeamFinderGpu&gt;(GraphCutSeamFinderBase::COST_COLOR);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">            seam_finder = makePtr&lt;detail::GraphCutSeamFinder&gt;(GraphCutSeamFinderBase::COST_COLOR);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seam_find_type == <span class="stringliteral">&quot;gc_colorgrad&quot;</span>)</div>
<div class="line">    {</div>
<div class="line"><span class="preprocessor">#ifdef HAVE_OPENCV_CUDALEGACY</span></div>
<div class="line">        <span class="keywordflow">if</span> (try_cuda &amp;&amp; cuda::getCudaEnabledDeviceCount() &gt; 0)</div>
<div class="line">            seam_finder = makePtr&lt;detail::GraphCutSeamFinderGpu&gt;(GraphCutSeamFinderBase::COST_COLOR_GRAD);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line">            seam_finder = makePtr&lt;detail::GraphCutSeamFinder&gt;(GraphCutSeamFinderBase::COST_COLOR_GRAD);</div>
<div class="line">    }</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seam_find_type == <span class="stringliteral">&quot;dp_color&quot;</span>)</div>
<div class="line">        seam_finder = makePtr&lt;detail::DpSeamFinder&gt;(DpSeamFinder::COLOR);</div>
<div class="line">    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (seam_find_type == <span class="stringliteral">&quot;dp_colorgrad&quot;</span>)</div>
<div class="line">        seam_finder = makePtr&lt;detail::DpSeamFinder&gt;(DpSeamFinder::COLOR_GRAD);</div>
<div class="line">    <span class="keywordflow">if</span> (!seam_finder)</div>
<div class="line">    {</div>
<div class="line">        cout &lt;&lt; <span class="stringliteral">&quot;Can&#39;t create the following seam finder &#39;&quot;</span> &lt;&lt; seam_find_type &lt;&lt; <span class="stringliteral">&quot;&#39;\n&quot;</span>;</div>
<div class="line">        <span class="keywordflow">return</span> 1;</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    seam_finder-&gt;find(images_warped_f, corners, masks_warped);</div>
<div class="line"> </div>
<div class="line">    LOGLN(<span class="stringliteral">&quot;Finding seams, time: &quot;</span> &lt;&lt; ((<a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>() - t) / <a class="code hl_function" href="../../db/de0/group__core__utils.html#ga705441a9ef01f47acdc55d87fbe5090c">getTickFrequency</a>()) &lt;&lt; <span class="stringliteral">&quot; sec&quot;</span>);</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// Release unused memory</span></div>
<div class="line">    images.clear();</div>
<div class="line">    images_warped.clear();</div>
<div class="line">    images_warped_f.clear();</div>
<div class="line">    masks.clear();</div>
<div class="line"> </div>
<div class="line">    LOGLN(<span class="stringliteral">&quot;Compositing...&quot;</span>);</div>
<div class="line"><span class="preprocessor">#if ENABLE_LOG</span></div>
<div class="line">    t = <a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>();</div>
<div class="line"><span class="preprocessor">#endif</span></div>
<div class="line"> </div>
<div class="line">    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img_warped, img_warped_s;</div>
<div class="line">    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> dilated_mask, seam_mask, <a class="code hl_function" href="../../da/dd3/group__gapi__math.html#gaba076d51941328cb7ca9348b7b535220">mask</a>, mask_warped;</div>
<div class="line">    <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga6395ca871a678020c4a31fadf7e8cc63">Ptr&lt;Blender&gt;</a> blender;</div>
<div class="line">    <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga6395ca871a678020c4a31fadf7e8cc63">Ptr&lt;Timelapser&gt;</a> timelapser;</div>
<div class="line">    <span class="comment">//double compose_seam_aspect = 1;</span></div>
<div class="line">    <span class="keywordtype">double</span> compose_work_aspect = 1;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> img_idx = 0; img_idx &lt; num_images; ++img_idx)</div>
<div class="line">    {</div>
<div class="line">        LOGLN(<span class="stringliteral">&quot;Compositing image #&quot;</span> &lt;&lt; indices[img_idx]+1);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Read image and resize it if necessary</span></div>
<div class="line">        full_img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gab32ee19e22660912565f8140d0f675a8">imread</a>(samples::findFile(img_names[img_idx]));</div>
<div class="line">        <span class="keywordflow">if</span> (!is_compose_scale_set)</div>
<div class="line">        {</div>
<div class="line">            <span class="keywordflow">if</span> (compose_megapix &gt; 0)</div>
<div class="line">                compose_scale = <a class="code hl_function" href="../../d2/de8/group__core__array.html#ga9af368f182ee76d0463d0d8d5330b764">min</a>(1.0, <a class="code hl_function" href="../../d2/de8/group__core__array.html#ga186222c3919657890f88df5a1f64a7d7">sqrt</a>(compose_megapix * 1e6 / full_img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#a146f8e8dda07d1365a575ab83d9828d1">size</a>().area()));</div>
<div class="line">            is_compose_scale_set = <span class="keyword">true</span>;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Compute relative scales</span></div>
<div class="line">            <span class="comment">//compose_seam_aspect = compose_scale / seam_scale;</span></div>
<div class="line">            compose_work_aspect = compose_scale / work_scale;</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Update warped image scale</span></div>
<div class="line">            warped_image_scale *= <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(compose_work_aspect);</div>
<div class="line">            warper = warper_creator-&gt;create(warped_image_scale);</div>
<div class="line"> </div>
<div class="line">            <span class="comment">// Update corners and sizes</span></div>
<div class="line">            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; num_images; ++i)</div>
<div class="line">            {</div>
<div class="line">                <span class="comment">// Update intrinsics</span></div>
<div class="line">                cameras[i].focal *= compose_work_aspect;</div>
<div class="line">                cameras[i].ppx *= compose_work_aspect;</div>
<div class="line">                cameras[i].ppy *= compose_work_aspect;</div>
<div class="line"> </div>
<div class="line">                <span class="comment">// Update corner and size</span></div>
<div class="line">                <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a> sz = full_img_sizes[i];</div>
<div class="line">                <span class="keywordflow">if</span> (std::abs(compose_scale - 1) &gt; 1e-1)</div>
<div class="line">                {</div>
<div class="line">                    sz.<a id="a20" name="a20"></a><a class="code hl_variable" href="../../d6/d50/classcv_1_1Size__.html#abfe0367b32c407ddccf5ddf92667c73d">width</a> = <a id="a21" name="a21"></a><a class="code hl_function" href="../../db/de0/group__core__utils.html#ga085eca238176984a0b72df2818598d85">cvRound</a>(full_img_sizes[i].width * compose_scale);</div>
<div class="line">                    sz.<a id="a22" name="a22"></a><a class="code hl_variable" href="../../d6/d50/classcv_1_1Size__.html#a1d289dce6b5d8006a54f3ee0259fc545">height</a> = <a class="code hl_function" href="../../db/de0/group__core__utils.html#ga085eca238176984a0b72df2818598d85">cvRound</a>(full_img_sizes[i].height * compose_scale);</div>
<div class="line">                }</div>
<div class="line"> </div>
<div class="line">                <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> K;</div>
<div class="line">                cameras[i].K().<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#adf88c60c5b4980e05bb556080916978b">convertTo</a>(K, <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga4a3def5d72b74bed31f5f8ab7676099c">CV_32F</a>);</div>
<div class="line">                <a id="_a23" name="_a23"></a><a class="code hl_class" href="../../d2/d44/classcv_1_1Rect__.html">Rect</a> roi = warper-&gt;warpRoi(sz, K, cameras[i].R);</div>
<div class="line">                corners[i] = roi.<a id="a24" name="a24"></a><a class="code hl_function" href="../../d2/d44/classcv_1_1Rect__.html#a15e686670dd8d23246b9a2c644744fe3">tl</a>();</div>
<div class="line">                sizes[i] = roi.<a id="a25" name="a25"></a><a class="code hl_function" href="../../d2/d44/classcv_1_1Rect__.html#a9c727936bddffe38079628e0ec7942cc">size</a>();</div>
<div class="line">            }</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../d7/dcc/group__core__utils__softfloat.html#ga72dd776aec140cd56401b29af17e36c3">abs</a>(compose_scale - 1) &gt; 1e-1)</div>
<div class="line">            <a class="code hl_function" href="../../da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">resize</a>(full_img, img, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>(), compose_scale, compose_scale, INTER_LINEAR_EXACT);</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">            img = full_img;</div>
<div class="line">        full_img.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#ae48d4913285518e2c21a3457017e716e">release</a>();</div>
<div class="line">        <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a> img_size = img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#a146f8e8dda07d1365a575ab83d9828d1">size</a>();</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> K;</div>
<div class="line">        cameras[img_idx].K().<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#adf88c60c5b4980e05bb556080916978b">convertTo</a>(K, <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga4a3def5d72b74bed31f5f8ab7676099c">CV_32F</a>);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Warp the current image</span></div>
<div class="line">        warper-&gt;warp(img, K, cameras[img_idx].R, INTER_LINEAR, BORDER_REFLECT, img_warped);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Warp the current image mask</span></div>
<div class="line">        <a class="code hl_function" href="../../da/dd3/group__gapi__math.html#gaba076d51941328cb7ca9348b7b535220">mask</a>.create(img_size, <a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga32b18d904ee2b1731a9416a8eef67d06">CV_8U</a>);</div>
<div class="line">        <a class="code hl_function" href="../../da/dd3/group__gapi__math.html#gaba076d51941328cb7ca9348b7b535220">mask</a>.setTo(Scalar::all(255));</div>
<div class="line">        warper-&gt;warp(mask, K, cameras[img_idx].R, INTER_NEAREST, BORDER_CONSTANT, mask_warped);</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Compensate exposure</span></div>
<div class="line">        compensator-&gt;apply(img_idx, corners[img_idx], img_warped, mask_warped);</div>
<div class="line"> </div>
<div class="line">        img_warped.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#adf88c60c5b4980e05bb556080916978b">convertTo</a>(img_warped_s, <a id="a26" name="a26"></a><a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga9d2ee1a8334733dea7482a47a88e0f87">CV_16S</a>);</div>
<div class="line">        img_warped.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#ae48d4913285518e2c21a3457017e716e">release</a>();</div>
<div class="line">        img.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#ae48d4913285518e2c21a3457017e716e">release</a>();</div>
<div class="line">        <a class="code hl_function" href="../../da/dd3/group__gapi__math.html#gaba076d51941328cb7ca9348b7b535220">mask</a>.release();</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="../../d4/d86/group__imgproc__filter.html#ga4ff0f3318642c4f469d0e11f242f3b6c">dilate</a>(masks_warped[img_idx], dilated_mask, <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a>());</div>
<div class="line">        <a class="code hl_function" href="../../da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">resize</a>(dilated_mask, seam_mask, mask_warped.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#a146f8e8dda07d1365a575ab83d9828d1">size</a>(), 0, 0, INTER_LINEAR_EXACT);</div>
<div class="line">        mask_warped = seam_mask &amp; mask_warped;</div>
<div class="line"> </div>
<div class="line">        <span class="keywordflow">if</span> (!blender &amp;&amp; !timelapse)</div>
<div class="line">        {</div>
<div class="line">            blender = Blender::createDefault(blend_type, try_cuda);</div>
<div class="line">            <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a> dst_sz = <a class="code hl_function" href="../../d1/d46/group__stitching.html#gab7d43257ae6a1d607ee195f369d51b67">resultRoi</a>(corners, sizes).<a class="code hl_function" href="../../d2/d44/classcv_1_1Rect__.html#a9c727936bddffe38079628e0ec7942cc">size</a>();</div>
<div class="line">            <span class="keywordtype">float</span> blend_width = <a class="code hl_function" href="../../d2/de8/group__core__array.html#ga186222c3919657890f88df5a1f64a7d7">sqrt</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(dst_sz.<a id="a27" name="a27"></a><a class="code hl_function" href="../../d6/d50/classcv_1_1Size__.html#a8cc3d32e40c9b5324d316c35c4773dff">area</a>())) * blend_strength / 100.f;</div>
<div class="line">            <span class="keywordflow">if</span> (blend_width &lt; 1.f)</div>
<div class="line">                blender = Blender::createDefault(Blender::NO, try_cuda);</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (blend_type == Blender::MULTI_BAND)</div>
<div class="line">            {</div>
<div class="line">                <a id="_a28" name="_a28"></a><a class="code hl_class" href="../../d5/d4b/classcv_1_1detail_1_1MultiBandBlender.html">MultiBandBlender</a>* mb = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="../../d5/d4b/classcv_1_1detail_1_1MultiBandBlender.html">MultiBandBlender</a>*<span class="keyword">&gt;</span>(blender.get());</div>
<div class="line">                mb-&gt;<a id="a29" name="a29"></a><a class="code hl_function" href="../../d5/d4b/classcv_1_1detail_1_1MultiBandBlender.html#a2efd19181426ba017b23c24c88666188">setNumBands</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(ceil(<a class="code hl_function" href="../../d2/de8/group__core__array.html#ga937ecdce4679a77168730830a955bea7">log</a>(blend_width)/<a class="code hl_function" href="../../d2/de8/group__core__array.html#ga937ecdce4679a77168730830a955bea7">log</a>(2.)) - 1.));</div>
<div class="line">                LOGLN(<span class="stringliteral">&quot;Multi-band blender, number of bands: &quot;</span> &lt;&lt; mb-&gt;<a id="a30" name="a30"></a><a class="code hl_function" href="../../d5/d4b/classcv_1_1detail_1_1MultiBandBlender.html#a150b2708c084e00b107fcc42d0298e98">numBands</a>());</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span> <span class="keywordflow">if</span> (blend_type == Blender::FEATHER)</div>
<div class="line">            {</div>
<div class="line">                <a id="_a31" name="_a31"></a><a class="code hl_class" href="../../d4/d69/classcv_1_1detail_1_1FeatherBlender.html">FeatherBlender</a>* fb = <span class="keyword">dynamic_cast&lt;</span><a class="code hl_class" href="../../d4/d69/classcv_1_1detail_1_1FeatherBlender.html">FeatherBlender</a>*<span class="keyword">&gt;</span>(blender.get());</div>
<div class="line">                fb-&gt;<a id="a32" name="a32"></a><a class="code hl_function" href="../../d4/d69/classcv_1_1detail_1_1FeatherBlender.html#aa4c09de778a01cdad7af1aabc443b279">setSharpness</a>(1.f/blend_width);</div>
<div class="line">                LOGLN(<span class="stringliteral">&quot;Feather blender, sharpness: &quot;</span> &lt;&lt; fb-&gt;<a id="a33" name="a33"></a><a class="code hl_function" href="../../d4/d69/classcv_1_1detail_1_1FeatherBlender.html#a52175c9bf5fb8ccbe692dcec2f575320">sharpness</a>());</div>
<div class="line">            }</div>
<div class="line">            blender-&gt;prepare(corners, sizes);</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!timelapser &amp;&amp; timelapse)</div>
<div class="line">        {</div>
<div class="line">            timelapser = Timelapser::createDefault(timelapse_type);</div>
<div class="line">            timelapser-&gt;initialize(corners, sizes);</div>
<div class="line">        }</div>
<div class="line"> </div>
<div class="line">        <span class="comment">// Blend the current image</span></div>
<div class="line">        <span class="keywordflow">if</span> (timelapse)</div>
<div class="line">        {</div>
<div class="line">            timelapser-&gt;process(img_warped_s, Mat::ones(img_warped_s.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#a146f8e8dda07d1365a575ab83d9828d1">size</a>(), <a id="a34" name="a34"></a><a class="code hl_define" href="../../d1/d1b/group__core__hal__interface.html#ga81df635441b21f532fdace401e04f588">CV_8UC1</a>), corners[img_idx]);</div>
<div class="line">            <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga1f6634802eeadfd7245bc75cf3e216c2">String</a> fixedFileName;</div>
<div class="line">            <span class="keywordtype">size_t</span> pos_s = <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga1f6634802eeadfd7245bc75cf3e216c2">String</a>(img_names[img_idx]).find_last_of(<span class="stringliteral">&quot;/\\&quot;</span>);</div>
<div class="line">            <span class="keywordflow">if</span> (pos_s == String::npos)</div>
<div class="line">            {</div>
<div class="line">                fixedFileName = <span class="stringliteral">&quot;fixed_&quot;</span> + img_names[img_idx];</div>
<div class="line">            }</div>
<div class="line">            <span class="keywordflow">else</span></div>
<div class="line">            {</div>
<div class="line">                fixedFileName = <span class="stringliteral">&quot;fixed_&quot;</span> + <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga1f6634802eeadfd7245bc75cf3e216c2">String</a>(img_names[img_idx]).substr(pos_s + 1, <a class="code hl_typedef" href="../../dc/d84/group__core__basic.html#ga1f6634802eeadfd7245bc75cf3e216c2">String</a>(img_names[img_idx]).length() - pos_s);</div>
<div class="line">            }</div>
<div class="line">            <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#ga8ac397bd09e48851665edbe12aa28f25">imwrite</a>(fixedFileName, timelapser-&gt;getDst());</div>
<div class="line">        }</div>
<div class="line">        <span class="keywordflow">else</span></div>
<div class="line">        {</div>
<div class="line">            blender-&gt;feed(img_warped_s, mask_warped, corners[img_idx]);</div>
<div class="line">        }</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="keywordflow">if</span> (!timelapse)</div>
<div class="line">    {</div>
<div class="line">        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> result, result_mask;</div>
<div class="line">        blender-&gt;blend(result, result_mask);</div>
<div class="line"> </div>
<div class="line">        LOGLN(<span class="stringliteral">&quot;Compositing, time: &quot;</span> &lt;&lt; ((<a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>() - t) / <a class="code hl_function" href="../../db/de0/group__core__utils.html#ga705441a9ef01f47acdc55d87fbe5090c">getTickFrequency</a>()) &lt;&lt; <span class="stringliteral">&quot; sec&quot;</span>);</div>
<div class="line"> </div>
<div class="line">        <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#ga8ac397bd09e48851665edbe12aa28f25">imwrite</a>(result_name, result);</div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    LOGLN(<span class="stringliteral">&quot;Finished, total time: &quot;</span> &lt;&lt; ((<a class="code hl_function" href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">getTickCount</a>() - app_start_time) / <a class="code hl_function" href="../../db/de0/group__core__utils.html#ga705441a9ef01f47acdc55d87fbe5090c">getTickFrequency</a>()) &lt;&lt; <span class="stringliteral">&quot; sec&quot;</span>);</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aautocalib_8hpp_html"><div class="ttname"><a href="../../d3/d45/autocalib_8hpp.html">autocalib.hpp</a></div></div>
<div class="ttc" id="ablenders_8hpp_html"><div class="ttname"><a href="../../d9/d88/blenders_8hpp.html">blenders.hpp</a></div></div>
<div class="ttc" id="acamera_8hpp_html"><div class="ttname"><a href="../../d0/d8a/camera_8hpp.html">camera.hpp</a></div></div>
<div class="ttc" id="aclasscv_1_1Mat___html"><div class="ttname"><a href="../../df/dfc/classcv_1_1Mat__.html">cv::Mat_</a></div><div class="ttdoc">Template matrix class derived from Mat.</div><div class="ttdef"><b>Definition</b> mat.hpp:2230</div></div>
<div class="ttc" id="aclasscv_1_1Mat_html"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html">cv::Mat</a></div><div class="ttdoc">n-dimensional dense array class</div><div class="ttdef"><b>Definition</b> mat.hpp:812</div></div>
<div class="ttc" id="aclasscv_1_1Mat_html_a03d2a2570d06dcae378f788725789aa4"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#a03d2a2570d06dcae378f788725789aa4">cv::Mat::clone</a></div><div class="ttdeci">CV_NODISCARD_STD Mat clone() const</div><div class="ttdoc">Creates a full copy of the array and the underlying data.</div></div>
<div class="ttc" id="aclasscv_1_1Mat_html_a146f8e8dda07d1365a575ab83d9828d1"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#a146f8e8dda07d1365a575ab83d9828d1">cv::Mat::size</a></div><div class="ttdeci">MatSize size</div><div class="ttdef"><b>Definition</b> mat.hpp:2160</div></div>
<div class="ttc" id="aclasscv_1_1Mat_html_abbec3525a852e77998aba034813fded4"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#abbec3525a852e77998aba034813fded4">cv::Mat::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Returns true if the array has no elements.</div></div>
<div class="ttc" id="aclasscv_1_1Mat_html_adf88c60c5b4980e05bb556080916978b"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#adf88c60c5b4980e05bb556080916978b">cv::Mat::convertTo</a></div><div class="ttdeci">void convertTo(OutputArray m, int rtype, double alpha=1, double beta=0) const</div><div class="ttdoc">Converts an array to another data type with optional scaling.</div></div>
<div class="ttc" id="aclasscv_1_1Mat_html_ae48d4913285518e2c21a3457017e716e"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#ae48d4913285518e2c21a3457017e716e">cv::Mat::release</a></div><div class="ttdeci">void release()</div><div class="ttdoc">Decrements the reference counter and deallocates the matrix if needed.</div></div>
<div class="ttc" id="aclasscv_1_1Rect___html"><div class="ttname"><a href="../../d2/d44/classcv_1_1Rect__.html">cv::Rect_</a></div><div class="ttdoc">Template class for 2D rectangles.</div><div class="ttdef"><b>Definition</b> types.hpp:444</div></div>
<div class="ttc" id="aclasscv_1_1Rect___html_a15e686670dd8d23246b9a2c644744fe3"><div class="ttname"><a href="../../d2/d44/classcv_1_1Rect__.html#a15e686670dd8d23246b9a2c644744fe3">cv::Rect_::tl</a></div><div class="ttdeci">Point_&lt; _Tp &gt; tl() const</div><div class="ttdoc">the top-left corner</div></div>
<div class="ttc" id="aclasscv_1_1Rect___html_a9c727936bddffe38079628e0ec7942cc"><div class="ttname"><a href="../../d2/d44/classcv_1_1Rect__.html#a9c727936bddffe38079628e0ec7942cc">cv::Rect_::size</a></div><div class="ttdeci">Size_&lt; _Tp &gt; size() const</div><div class="ttdoc">size (width, height) of the rectangle</div></div>
<div class="ttc" id="aclasscv_1_1Size___html"><div class="ttname"><a href="../../d6/d50/classcv_1_1Size__.html">cv::Size_</a></div><div class="ttdoc">Template class for specifying the size of an image or rectangle.</div><div class="ttdef"><b>Definition</b> types.hpp:335</div></div>
<div class="ttc" id="aclasscv_1_1Size___html_a1d289dce6b5d8006a54f3ee0259fc545"><div class="ttname"><a href="../../d6/d50/classcv_1_1Size__.html#a1d289dce6b5d8006a54f3ee0259fc545">cv::Size_::height</a></div><div class="ttdeci">_Tp height</div><div class="ttdoc">the height</div><div class="ttdef"><b>Definition</b> types.hpp:363</div></div>
<div class="ttc" id="aclasscv_1_1Size___html_a8cc3d32e40c9b5324d316c35c4773dff"><div class="ttname"><a href="../../d6/d50/classcv_1_1Size__.html#a8cc3d32e40c9b5324d316c35c4773dff">cv::Size_::area</a></div><div class="ttdeci">_Tp area() const</div><div class="ttdoc">the area (width*height)</div></div>
<div class="ttc" id="aclasscv_1_1Size___html_abfe0367b32c407ddccf5ddf92667c73d"><div class="ttname"><a href="../../d6/d50/classcv_1_1Size__.html#abfe0367b32c407ddccf5ddf92667c73d">cv::Size_::width</a></div><div class="ttdeci">_Tp width</div><div class="ttdoc">the width</div><div class="ttdef"><b>Definition</b> types.hpp:362</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1BlocksCompensator_html"><div class="ttname"><a href="../../da/df4/classcv_1_1detail_1_1BlocksCompensator.html">cv::detail::BlocksCompensator</a></div><div class="ttdoc">Exposure compensator which tries to remove exposure related artifacts by adjusting image blocks.</div><div class="ttdef"><b>Definition</b> exposure_compensate.hpp:170</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1BlocksCompensator_html_a2100042d80ccf54b18d6513afff5a731"><div class="ttname"><a href="../../da/df4/classcv_1_1detail_1_1BlocksCompensator.html#a2100042d80ccf54b18d6513afff5a731">cv::detail::BlocksCompensator::setBlockSize</a></div><div class="ttdeci">void setBlockSize(int width, int height)</div><div class="ttdef"><b>Definition</b> exposure_compensate.hpp:182</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1BlocksCompensator_html_a2764dddb47b321b5c66b33b28f4e8571"><div class="ttname"><a href="../../da/df4/classcv_1_1detail_1_1BlocksCompensator.html#a2764dddb47b321b5c66b33b28f4e8571">cv::detail::BlocksCompensator::setNrFeeds</a></div><div class="ttdeci">void setNrFeeds(int nr_feeds)</div><div class="ttdef"><b>Definition</b> exposure_compensate.hpp:178</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1BlocksCompensator_html_a96056be42faacbbc90c88d1a933f732c"><div class="ttname"><a href="../../da/df4/classcv_1_1detail_1_1BlocksCompensator.html#a96056be42faacbbc90c88d1a933f732c">cv::detail::BlocksCompensator::setNrGainsFilteringIterations</a></div><div class="ttdeci">void setNrGainsFilteringIterations(int nr_iterations)</div><div class="ttdef"><b>Definition</b> exposure_compensate.hpp:185</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1ChannelsCompensator_html"><div class="ttname"><a href="../../d4/ddd/classcv_1_1detail_1_1ChannelsCompensator.html">cv::detail::ChannelsCompensator</a></div><div class="ttdoc">Exposure compensator which tries to remove exposure related artifacts by adjusting image intensities ...</div><div class="ttdef"><b>Definition</b> exposure_compensate.hpp:146</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1ChannelsCompensator_html_a0e88972a7011b2a112e4fe20346d4f35"><div class="ttname"><a href="../../d4/ddd/classcv_1_1detail_1_1ChannelsCompensator.html#a0e88972a7011b2a112e4fe20346d4f35">cv::detail::ChannelsCompensator::setNrFeeds</a></div><div class="ttdeci">void setNrFeeds(int nr_feeds)</div><div class="ttdef"><b>Definition</b> exposure_compensate.hpp:155</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1FeatherBlender_html"><div class="ttname"><a href="../../d4/d69/classcv_1_1detail_1_1FeatherBlender.html">cv::detail::FeatherBlender</a></div><div class="ttdoc">Simple blender which mixes images at its borders.</div><div class="ttdef"><b>Definition</b> blenders.hpp:101</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1FeatherBlender_html_a52175c9bf5fb8ccbe692dcec2f575320"><div class="ttname"><a href="../../d4/d69/classcv_1_1detail_1_1FeatherBlender.html#a52175c9bf5fb8ccbe692dcec2f575320">cv::detail::FeatherBlender::sharpness</a></div><div class="ttdeci">float sharpness() const</div><div class="ttdef"><b>Definition</b> blenders.hpp:105</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1FeatherBlender_html_aa4c09de778a01cdad7af1aabc443b279"><div class="ttname"><a href="../../d4/d69/classcv_1_1detail_1_1FeatherBlender.html#aa4c09de778a01cdad7af1aabc443b279">cv::detail::FeatherBlender::setSharpness</a></div><div class="ttdeci">void setSharpness(float val)</div><div class="ttdef"><b>Definition</b> blenders.hpp:106</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1GainCompensator_html"><div class="ttname"><a href="../../d0/de1/classcv_1_1detail_1_1GainCompensator.html">cv::detail::GainCompensator</a></div><div class="ttdoc">Exposure compensator which tries to remove exposure related artifacts by adjusting image intensities,...</div><div class="ttdef"><b>Definition</b> exposure_compensate.hpp:112</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1GainCompensator_html_aa1b612c1f334592c084cdf057ce15805"><div class="ttname"><a href="../../d0/de1/classcv_1_1detail_1_1GainCompensator.html#aa1b612c1f334592c084cdf057ce15805">cv::detail::GainCompensator::setNrFeeds</a></div><div class="ttdeci">void setNrFeeds(int nr_feeds)</div><div class="ttdef"><b>Definition</b> exposure_compensate.hpp:126</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1MultiBandBlender_html"><div class="ttname"><a href="../../d5/d4b/classcv_1_1detail_1_1MultiBandBlender.html">cv::detail::MultiBandBlender</a></div><div class="ttdoc">Blender which uses multi-band blending algorithm (see ).</div><div class="ttdef"><b>Definition</b> blenders.hpp:128</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1MultiBandBlender_html_a150b2708c084e00b107fcc42d0298e98"><div class="ttname"><a href="../../d5/d4b/classcv_1_1detail_1_1MultiBandBlender.html#a150b2708c084e00b107fcc42d0298e98">cv::detail::MultiBandBlender::numBands</a></div><div class="ttdeci">int numBands() const</div><div class="ttdef"><b>Definition</b> blenders.hpp:132</div></div>
<div class="ttc" id="aclasscv_1_1detail_1_1MultiBandBlender_html_a2efd19181426ba017b23c24c88666188"><div class="ttname"><a href="../../d5/d4b/classcv_1_1detail_1_1MultiBandBlender.html#a2efd19181426ba017b23c24c88666188">cv::detail::MultiBandBlender::setNumBands</a></div><div class="ttdeci">void setNumBands(int val)</div><div class="ttdef"><b>Definition</b> blenders.hpp:133</div></div>
<div class="ttc" id="adetail_2warpers_8hpp_html"><div class="ttname"><a href="../../dc/de7/detail_2warpers_8hpp.html">warpers.hpp</a></div></div>
<div class="ttc" id="aexposure__compensate_8hpp_html"><div class="ttname"><a href="../../df/d70/exposure__compensate_8hpp.html">exposure_compensate.hpp</a></div></div>
<div class="ttc" id="agroup__core__array_html_ga186222c3919657890f88df5a1f64a7d7"><div class="ttname"><a href="../../d2/de8/group__core__array.html#ga186222c3919657890f88df5a1f64a7d7">cv::sqrt</a></div><div class="ttdeci">void sqrt(InputArray src, OutputArray dst)</div><div class="ttdoc">Calculates a square root of array elements.</div></div>
<div class="ttc" id="agroup__core__array_html_ga45dd56da289494ce874be2324856898f"><div class="ttname"><a href="../../d2/de8/group__core__array.html#ga45dd56da289494ce874be2324856898f">cv::sort</a></div><div class="ttdeci">void sort(InputArray src, OutputArray dst, int flags)</div><div class="ttdoc">Sorts each row or each column of a matrix.</div></div>
<div class="ttc" id="agroup__core__array_html_ga937ecdce4679a77168730830a955bea7"><div class="ttname"><a href="../../d2/de8/group__core__array.html#ga937ecdce4679a77168730830a955bea7">cv::log</a></div><div class="ttdeci">void log(InputArray src, OutputArray dst)</div><div class="ttdoc">Calculates the natural logarithm of every array element.</div></div>
<div class="ttc" id="agroup__core__array_html_ga9af368f182ee76d0463d0d8d5330b764"><div class="ttname"><a href="../../d2/de8/group__core__array.html#ga9af368f182ee76d0463d0d8d5330b764">cv::min</a></div><div class="ttdeci">void min(InputArray src1, InputArray src2, OutputArray dst)</div><div class="ttdoc">Calculates per-element minimum of two arrays or an array and a scalar.</div></div>
<div class="ttc" id="agroup__core__basic_html_ga1f6634802eeadfd7245bc75cf3e216c2"><div class="ttname"><a href="../../dc/d84/group__core__basic.html#ga1f6634802eeadfd7245bc75cf3e216c2">cv::String</a></div><div class="ttdeci">std::string String</div><div class="ttdef"><b>Definition</b> cvstd.hpp:151</div></div>
<div class="ttc" id="agroup__core__basic_html_ga6395ca871a678020c4a31fadf7e8cc63"><div class="ttname"><a href="../../dc/d84/group__core__basic.html#ga6395ca871a678020c4a31fadf7e8cc63">cv::Ptr</a></div><div class="ttdeci">std::shared_ptr&lt; _Tp &gt; Ptr</div><div class="ttdef"><b>Definition</b> cvstd_wrapper.hpp:23</div></div>
<div class="ttc" id="agroup__core__hal__interface_html_ga32b18d904ee2b1731a9416a8eef67d06"><div class="ttname"><a href="../../d1/d1b/group__core__hal__interface.html#ga32b18d904ee2b1731a9416a8eef67d06">CV_8U</a></div><div class="ttdeci">#define CV_8U</div><div class="ttdef"><b>Definition</b> interface.h:73</div></div>
<div class="ttc" id="agroup__core__hal__interface_html_ga4a3def5d72b74bed31f5f8ab7676099c"><div class="ttname"><a href="../../d1/d1b/group__core__hal__interface.html#ga4a3def5d72b74bed31f5f8ab7676099c">CV_32F</a></div><div class="ttdeci">#define CV_32F</div><div class="ttdef"><b>Definition</b> interface.h:78</div></div>
<div class="ttc" id="agroup__core__hal__interface_html_ga7cde0074dfd288f2d70c0e035dacb28a"><div class="ttname"><a href="../../d1/d1b/group__core__hal__interface.html#ga7cde0074dfd288f2d70c0e035dacb28a">int64</a></div><div class="ttdeci">int64_t int64</div><div class="ttdef"><b>Definition</b> interface.h:61</div></div>
<div class="ttc" id="agroup__core__hal__interface_html_ga81df635441b21f532fdace401e04f588"><div class="ttname"><a href="../../d1/d1b/group__core__hal__interface.html#ga81df635441b21f532fdace401e04f588">CV_8UC1</a></div><div class="ttdeci">#define CV_8UC1</div><div class="ttdef"><b>Definition</b> interface.h:88</div></div>
<div class="ttc" id="agroup__core__hal__interface_html_ga9d2ee1a8334733dea7482a47a88e0f87"><div class="ttname"><a href="../../d1/d1b/group__core__hal__interface.html#ga9d2ee1a8334733dea7482a47a88e0f87">CV_16S</a></div><div class="ttdeci">#define CV_16S</div><div class="ttdef"><b>Definition</b> interface.h:76</div></div>
<div class="ttc" id="agroup__core__utils__softfloat_html_ga72dd776aec140cd56401b29af17e36c3"><div class="ttname"><a href="../../d7/dcc/group__core__utils__softfloat.html#ga72dd776aec140cd56401b29af17e36c3">cv::abs</a></div><div class="ttdeci">softfloat abs(softfloat a)</div><div class="ttdoc">Absolute value.</div><div class="ttdef"><b>Definition</b> softfloat.hpp:444</div></div>
<div class="ttc" id="agroup__core__utils_html_ga085eca238176984a0b72df2818598d85"><div class="ttname"><a href="../../db/de0/group__core__utils.html#ga085eca238176984a0b72df2818598d85">cvRound</a></div><div class="ttdeci">int cvRound(double value)</div><div class="ttdoc">Rounds floating-point number to the nearest integer.</div><div class="ttdef"><b>Definition</b> fast_math.hpp:200</div></div>
<div class="ttc" id="agroup__core__utils_html_ga705441a9ef01f47acdc55d87fbe5090c"><div class="ttname"><a href="../../db/de0/group__core__utils.html#ga705441a9ef01f47acdc55d87fbe5090c">cv::getTickFrequency</a></div><div class="ttdeci">double getTickFrequency()</div><div class="ttdoc">Returns the number of ticks per second.</div></div>
<div class="ttc" id="agroup__core__utils_html_gae4904ef072dede53cf161d9a6869083f"><div class="ttname"><a href="../../db/de0/group__core__utils.html#gae4904ef072dede53cf161d9a6869083f">cv::setBreakOnError</a></div><div class="ttdeci">bool setBreakOnError(bool flag)</div><div class="ttdoc">Sets/resets the break-on-error mode.</div></div>
<div class="ttc" id="agroup__core__utils_html_gae73f58000611a1af25dd36d496bf4487"><div class="ttname"><a href="../../db/de0/group__core__utils.html#gae73f58000611a1af25dd36d496bf4487">cv::getTickCount</a></div><div class="ttdeci">int64 getTickCount()</div><div class="ttdoc">Returns the number of ticks.</div></div>
<div class="ttc" id="agroup__gapi__math_html_gaba076d51941328cb7ca9348b7b535220"><div class="ttname"><a href="../../da/dd3/group__gapi__math.html#gaba076d51941328cb7ca9348b7b535220">cv::gapi::mask</a></div><div class="ttdeci">GMat mask(const GMat &amp;src, const GMat &amp;mask)</div><div class="ttdoc">Applies a mask to a matrix.</div></div>
<div class="ttc" id="agroup__gapi__transform_html_gae972b2c91904d36e92ee14a6778db82e"><div class="ttname"><a href="../../d6/d91/group__gapi__transform.html#gae972b2c91904d36e92ee14a6778db82e">cv::gapi::convertTo</a></div><div class="ttdeci">GMat convertTo(const GMat &amp;src, int rdepth, double alpha=1, double beta=0)</div><div class="ttdoc">Converts a matrix to another data depth with optional scaling.</div></div>
<div class="ttc" id="agroup__imgcodecs_html_ga8ac397bd09e48851665edbe12aa28f25"><div class="ttname"><a href="../../d4/da8/group__imgcodecs.html#ga8ac397bd09e48851665edbe12aa28f25">cv::imwrite</a></div><div class="ttdeci">CV_EXPORTS_W bool imwrite(const String &amp;filename, InputArray img, const std::vector&lt; int &gt; &amp;params=std::vector&lt; int &gt;())</div><div class="ttdoc">Saves an image to a specified file.</div></div>
<div class="ttc" id="agroup__imgcodecs_html_gab32ee19e22660912565f8140d0f675a8"><div class="ttname"><a href="../../d4/da8/group__imgcodecs.html#gab32ee19e22660912565f8140d0f675a8">cv::imread</a></div><div class="ttdeci">CV_EXPORTS_W Mat imread(const String &amp;filename, int flags=IMREAD_COLOR)</div><div class="ttdoc">Loads an image from a file.</div></div>
<div class="ttc" id="agroup__imgproc__filter_html_ga4ff0f3318642c4f469d0e11f242f3b6c"><div class="ttname"><a href="../../d4/d86/group__imgproc__filter.html#ga4ff0f3318642c4f469d0e11f242f3b6c">cv::dilate</a></div><div class="ttdeci">void dilate(InputArray src, OutputArray dst, InputArray kernel, Point anchor=Point(-1,-1), int iterations=1, int borderType=BORDER_CONSTANT, const Scalar &amp;borderValue=morphologyDefaultBorderValue())</div><div class="ttdoc">Dilates an image by using a specific structuring element.</div></div>
<div class="ttc" id="agroup__imgproc__transform_html_ga47a974309e9102f5f08231edc7e7529d"><div class="ttname"><a href="../../da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">cv::resize</a></div><div class="ttdeci">void resize(InputArray src, OutputArray dst, Size dsize, double fx=0, double fy=0, int interpolation=INTER_LINEAR)</div><div class="ttdoc">Resizes an image.</div></div>
<div class="ttc" id="agroup__stitching__match_html_ga1e4ca67941780b89a36003eed2bb476e"><div class="ttname"><a href="../../df/d8c/group__stitching__match.html#ga1e4ca67941780b89a36003eed2bb476e">cv::detail::computeImageFeatures</a></div><div class="ttdeci">void computeImageFeatures(const Ptr&lt; Feature2D &gt; &amp;featuresFinder, InputArrayOfArrays images, std::vector&lt; ImageFeatures &gt; &amp;features, InputArrayOfArrays masks=noArray())</div></div>
<div class="ttc" id="agroup__stitching__rotation_html_ga4a6e7887e96c3665053c4b2a64efe872"><div class="ttname"><a href="../../d7/d74/group__stitching__rotation.html#ga4a6e7887e96c3665053c4b2a64efe872">cv::detail::leaveBiggestComponent</a></div><div class="ttdeci">std::vector&lt; int &gt; leaveBiggestComponent(std::vector&lt; ImageFeatures &gt; &amp;features, std::vector&lt; MatchesInfo &gt; &amp;pairwise_matches, float conf_threshold)</div></div>
<div class="ttc" id="agroup__stitching__rotation_html_ga7f097123be3e2a782468c1e302e9332a"><div class="ttname"><a href="../../d7/d74/group__stitching__rotation.html#ga7f097123be3e2a782468c1e302e9332a">cv::detail::matchesGraphAsString</a></div><div class="ttdeci">String matchesGraphAsString(std::vector&lt; String &gt; &amp;paths, std::vector&lt; MatchesInfo &gt; &amp;pairwise_matches, float conf_threshold)</div></div>
<div class="ttc" id="agroup__stitching__rotation_html_ga83b24d4c3e93584986a56d9e43b9cf7f"><div class="ttname"><a href="../../d7/d74/group__stitching__rotation.html#ga83b24d4c3e93584986a56d9e43b9cf7f">cv::detail::WaveCorrectKind</a></div><div class="ttdeci">WaveCorrectKind</div><div class="ttdef"><b>Definition</b> motion_estimators.hpp:329</div></div>
<div class="ttc" id="agroup__stitching__rotation_html_ga8faf9588aebd5aeb6f8c649c82beb1fb"><div class="ttname"><a href="../../d7/d74/group__stitching__rotation.html#ga8faf9588aebd5aeb6f8c649c82beb1fb">cv::detail::waveCorrect</a></div><div class="ttdeci">void waveCorrect(std::vector&lt; Mat &gt; &amp;rmats, WaveCorrectKind kind)</div><div class="ttdoc">Tries to make panorama more horizontal (or vertical).</div></div>
<div class="ttc" id="agroup__stitching_html_gab7d43257ae6a1d607ee195f369d51b67"><div class="ttname"><a href="../../d1/d46/group__stitching.html#gab7d43257ae6a1d607ee195f369d51b67">cv::detail::resultRoi</a></div><div class="ttdeci">Rect resultRoi(const std::vector&lt; Point &gt; &amp;corners, const std::vector&lt; UMat &gt; &amp;images)</div></div>
<div class="ttc" id="ahighgui_8hpp_html"><div class="ttname"><a href="../../d4/dd5/highgui_8hpp.html">highgui.hpp</a></div></div>
<div class="ttc" id="ahighgui__qt_8cpp_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="../../dc/d89/highgui__qt_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition</b> highgui_qt.cpp:3</div></div>
<div class="ttc" id="aimgcodecs_8hpp_html"><div class="ttname"><a href="../../d6/d87/imgcodecs_8hpp.html">imgcodecs.hpp</a></div></div>
<div class="ttc" id="amatchers_8hpp_html"><div class="ttname"><a href="../../d3/dc9/matchers_8hpp.html">matchers.hpp</a></div></div>
<div class="ttc" id="amotion__estimators_8hpp_html"><div class="ttname"><a href="../../d3/d73/motion__estimators_8hpp.html">motion_estimators.hpp</a></div></div>
<div class="ttc" id="anamespacecv_1_1detail_html"><div class="ttname"><a href="../../d2/daf/namespacecv_1_1detail.html">cv::detail</a></div><div class="ttdef"><b>Definition</b> tracking.detail.hpp:21</div></div>
<div class="ttc" id="anamespacecv_1_1gapi_1_1streaming_html_abc5db6c129a4ea2177b3bfce576d9499"><div class="ttname"><a href="../../df/d5b/namespacecv_1_1gapi_1_1streaming.html#abc5db6c129a4ea2177b3bfce576d9499">cv::gapi::streaming::size</a></div><div class="ttdeci">GOpaque&lt; Size &gt; size(const GMat &amp;src)</div><div class="ttdoc">Gets dimensions from Mat.</div></div>
<div class="ttc" id="anamespacecv_html"><div class="ttname"><a href="../../d2/d75/namespacecv.html">cv</a></div><div class="ttdoc">&quot;black box&quot; representation of the file storage associated with a file on disk.</div><div class="ttdef"><b>Definition</b> core.hpp:102</div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdoc">STL namespace.</div></div>
<div class="ttc" id="anonfree_8hpp_html"><div class="ttname"><a href="../../dc/dcb/nonfree_8hpp.html">nonfree.hpp</a></div></div>
<div class="ttc" id="aseam__finders_8hpp_html"><div class="ttname"><a href="../../d1/d74/seam__finders_8hpp.html">seam_finders.hpp</a></div></div>
<div class="ttc" id="atimelapsers_8hpp_html"><div class="ttname"><a href="../../d8/d46/timelapsers_8hpp.html">timelapsers.hpp</a></div></div>
<div class="ttc" id="autility_8hpp_html"><div class="ttname"><a href="../../d1/d4e/utility_8hpp.html">utility.hpp</a></div></div>
<div class="ttc" id="awarpers_8hpp_html"><div class="ttname"><a href="../../da/d64/warpers_8hpp.html">warpers.hpp</a></div></div>
<div class="ttc" id="axfeatures2d_8hpp_html"><div class="ttname"><a href="../../dc/daa/xfeatures2d_8hpp.html">xfeatures2d.hpp</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 2 2024 21:52:10 for OpenCV by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.9.8
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
