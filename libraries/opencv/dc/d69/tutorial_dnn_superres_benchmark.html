<!-- HTML header for doxygen 1.8.6-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<title>OpenCV: Super-resolution benchmarking</title>
<link href="../../opencv.ico" rel="shortcut icon" type="image/x-icon" />
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../tutorial-utils.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
<script type="text/javascript">
window.MathJax = {
  options: {
    ignoreHtmlClass: 'tex2jax_ignore',
    processHtmlClass: 'tex2jax_process'
  },
  loader: {
    load: ['[tex]/ams']
  },
  tex: {
    macros: {},
    packages: ['base','configmacros','ams']
  }
};
//<![CDATA[
window.MathJax = {
    loader: {load: ['[tex]/ams']},
    tex: {
        packages: {'[+]': ['ams']},
        macros: {
            matTT: [ "\\[ \\left|\\begin{array}{ccc} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{array}\\right| \\]", 9],
            fork: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ \\end{array} \\right.", 4],
            forkthree: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ \\end{array} \\right.", 6],
            forkfour: ["\\left\\{ \\begin{array}{l l} #1 & \\mbox{#2}\\\\ #3 & \\mbox{#4}\\\\ #5 & \\mbox{#6}\\\\ #7 & \\mbox{#8}\\\\ \\end{array} \\right.", 8],
            vecthree: ["\\begin{bmatrix} #1\\\\ #2\\\\ #3 \\end{bmatrix}", 3],
            vecthreethree: ["\\begin{bmatrix} #1 & #2 & #3\\\\ #4 & #5 & #6\\\\ #7 & #8 & #9 \\end{bmatrix}", 9],
            cameramatrix: ["#1 = \\begin{bmatrix} f_x & 0 & c_x\\\\ 0 & f_y & c_y\\\\ 0 & 0 & 1 \\end{bmatrix}", 1],
            distcoeffs: ["(k_1, k_2, p_1, p_2[, k_3[, k_4, k_5, k_6 [, s_1, s_2, s_3, s_4[, \\tau_x, \\tau_y]]]]) \\text{ of 4, 5, 8, 12 or 14 elements}"],
            distcoeffsfisheye: ["(k_1, k_2, k_3, k_4)"],
            hdotsfor: ["\\dots", 1],
            mathbbm: ["\\mathbb{#1}", 1],
            bordermatrix: ["\\matrix{#1}", 1]
        },
        processEscapes: false
    }
};
//]]>
</script>
<script type="text/javascript" id="MathJax-script" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3.0.1/es5/tex-chtml.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
<link href="../../stylesheet.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<!--#include virtual="/google-search.html"-->
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../opencv-logo-small.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenCV
   &#160;<span id="projectnumber">4.10.0</span>
   </div>
   <div id="projectbrief">Open Source Computer Vision</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../d3/d81/tutorial_contrib_root.html">Tutorials for contrib modules</a></li><li class="navelem"><a class="el" href="../../d8/df8/tutorial_table_of_content_dnn_superres.html">Super Resolution using CNNs</a></li>  </ul>
</div>
</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Super-resolution benchmarking</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h1><a class="anchor" id="autotoc_md1886"></a>
Benchmarking</h1>
<p>The super-resolution module contains sample codes for benchmarking, in order to compare different models and algorithms. Here is presented a sample code for performing benchmarking, and then a few benchmarking results are collected. It was performed on an Intel i7-9700K CPU on an Ubuntu 18.04.02 OS.</p>
<h1><a class="anchor" id="autotoc_md1887"></a>
Source Code of the sample</h1>
<div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// This file is part of OpenCV project.</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// It is subject to the license terms in the LICENSE file found in the top-level directory</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">// of this distribution and at http://opencv.org/license.html.</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span> </div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span><span class="preprocessor">#include &lt;opencv2/opencv_modules.hpp&gt;</span></div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span> </div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#ifdef HAVE_OPENCV_QUALITY</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &lt;<a class="code" href="../../d3/db0/dnn__superres_8hpp.html">opencv2/dnn_superres.hpp</a>&gt;</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &lt;<a class="code" href="../../dd/d5c/quality_8hpp.html">opencv2/quality.hpp</a>&gt;</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &lt;<a class="code" href="../../d1/d4f/imgproc_2include_2opencv2_2imgproc_8hpp.html">opencv2/imgproc.hpp</a>&gt;</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &lt;<a class="code" href="../../d4/dd5/highgui_8hpp.html">opencv2/highgui.hpp</a>&gt;</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span> </div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d8/dcc/namespacestd.html">std</a>;</div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../d2/d75/namespacecv.html">cv</a>;</div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="keyword">using namespace </span>dnn_superres;</div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span> </div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="keyword">static</span> <span class="keywordtype">void</span> showBenchmark(vector&lt;Mat&gt; images, <span class="keywordtype">string</span> title, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a> imageSize,</div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span>                          <span class="keyword">const</span> vector&lt;String&gt; imageTitles,</div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span>                          <span class="keyword">const</span> vector&lt;double&gt; psnrValues,</div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span>                          <span class="keyword">const</span> vector&lt;double&gt; ssimValues)</div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span>{</div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span>    <span class="keywordtype">int</span> fontFace = FONT_HERSHEY_COMPLEX_SMALL;</div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span>    <span class="keywordtype">int</span> fontScale = 1;</div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span>    <a class="code hl_class" href="../../d1/da0/classcv_1_1Scalar__.html">Scalar</a> fontColor = <a class="code hl_class" href="../../d1/da0/classcv_1_1Scalar__.html">Scalar</a>(255, 255, 255);</div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span> </div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span>    <span class="keywordtype">int</span> len = <span class="keyword">static_cast&lt;</span><span class="keywordtype">int</span><span class="keyword">&gt;</span>(images.size());</div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span>    <span class="keywordtype">int</span> cols = 2, rows = 2;</div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span> </div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span>    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> fullImage = Mat::zeros(<a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>((cols * 10) + imageSize.<a class="code hl_variable" href="../../d6/d50/classcv_1_1Size__.html#abfe0367b32c407ddccf5ddf92667c73d">width</a> * cols, (rows * 10) + imageSize.<a class="code hl_variable" href="../../d6/d50/classcv_1_1Size__.html#a1d289dce6b5d8006a54f3ee0259fc545">height</a> * rows),</div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span>                               images[0].type());</div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span> </div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span>    stringstream ss;</div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span>    <span class="keywordtype">int</span> h_ = -1;</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span>    <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; len; i++) {</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> </div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>        <span class="keywordtype">int</span> fontStart = 15;</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span>        <span class="keywordtype">int</span> w_ = i % cols;</div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>        <span class="keywordflow">if</span> (i % cols == 0)</div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>            h_++;</div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>        <a class="code hl_class" href="../../d2/d44/classcv_1_1Rect__.html">Rect</a> ROI((w_ * (10 + imageSize.<a class="code hl_variable" href="../../d6/d50/classcv_1_1Size__.html#abfe0367b32c407ddccf5ddf92667c73d">width</a>)), (h_ * (10 + imageSize.<a class="code hl_variable" href="../../d6/d50/classcv_1_1Size__.html#a1d289dce6b5d8006a54f3ee0259fc545">height</a>)), imageSize.<a class="code hl_variable" href="../../d6/d50/classcv_1_1Size__.html#abfe0367b32c407ddccf5ddf92667c73d">width</a>, imageSize.<a class="code hl_variable" href="../../d6/d50/classcv_1_1Size__.html#a1d289dce6b5d8006a54f3ee0259fc545">height</a>);</div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>        <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> tmp;</div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>        resize(images[i], tmp, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>(ROI.width, ROI.height));</div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span> </div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span>        ss &lt;&lt; imageTitles[i];</div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>        putText(tmp,</div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>                ss.str(),</div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>                <a class="code hl_class" href="../../db/d4e/classcv_1_1Point__.html">Point</a>(5, fontStart),</div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>                fontFace,</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span>                fontScale,</div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>                fontColor,</div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>                1,</div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span>                16);</div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span> </div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span>        ss.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>        fontStart += 20;</div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span> </div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>        ss &lt;&lt; <span class="stringliteral">&quot;PSNR: &quot;</span> &lt;&lt; psnrValues[i];</div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span>        putText(tmp,</div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>                ss.str(),</div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>                <a class="code hl_class" href="../../db/d4e/classcv_1_1Point__.html">Point</a>(5, fontStart),</div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>                fontFace,</div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>                fontScale,</div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>                fontColor,</div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>                1,</div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>                16);</div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>        ss.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>        fontStart += 20;</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>        ss &lt;&lt; <span class="stringliteral">&quot;SSIM: &quot;</span> &lt;&lt; ssimValues[i];</div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>        putText(tmp,</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>                ss.str(),</div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>                <a class="code hl_class" href="../../db/d4e/classcv_1_1Point__.html">Point</a>(5, fontStart),</div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>                fontFace,</div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>                fontScale,</div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>                fontColor,</div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>                1,</div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>                16);</div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span> </div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>        ss.str(<span class="stringliteral">&quot;&quot;</span>);</div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>        fontStart += 20;</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>        tmp.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#a33fd5d125b4c302b0c9aa86980791a77">copyTo</a>(fullImage(ROI));</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>    }</div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span> </div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>    namedWindow(title, 1);</div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>    imshow(title, fullImage);</div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>    waitKey();</div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>}</div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span> </div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span><span class="keyword">static</span> <a class="code hl_class" href="../../d6/dcf/classcv_1_1Vec.html">Vec2d</a> getQualityValues(<a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> orig, <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> upsampled)</div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>{</div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>    <span class="keywordtype">double</span> psnr = PSNR(upsampled, orig);</div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>    <a class="code hl_class" href="../../d1/da0/classcv_1_1Scalar__.html">Scalar</a> q = quality::QualitySSIM::compute(upsampled, orig, noArray());</div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>    <span class="keywordtype">double</span> ssim = mean(<a class="code hl_class" href="../../d6/dcf/classcv_1_1Vec.html">Vec3d</a>((q[0]), q[1], q[2]))[0];</div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <span class="keywordflow">return</span> <a class="code hl_class" href="../../d6/dcf/classcv_1_1Vec.html">Vec2d</a>(psnr, ssim);</div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>}</div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span> </div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span><span class="keywordtype">int</span> <a class="code hl_function" href="../../dc/d89/highgui__qt_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> *argv[])</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span>{</div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>    <span class="comment">// Check for valid command line arguments, print usage</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>    <span class="comment">// if insufficient arguments were given.</span></div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>    <span class="keywordflow">if</span> (argc &lt; 4) {</div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>        cout &lt;&lt; <span class="stringliteral">&quot;usage:   Arg 1: image path  | Path to image&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>        cout &lt;&lt; <span class="stringliteral">&quot;\t Arg 2: algorithm | edsr, espcn, fsrcnn or lapsrn&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>        cout &lt;&lt; <span class="stringliteral">&quot;\t Arg 3: path to model file 2 \n&quot;</span>;</div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>        cout &lt;&lt; <span class="stringliteral">&quot;\t Arg 4: scale  | 2, 3, 4 or 8 \n&quot;</span>;</div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>        <span class="keywordflow">return</span> -1;</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span>    }</div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span> </div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>    <span class="keywordtype">string</span> path = string(argv[1]);</div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>    <span class="keywordtype">string</span> algorithm = string(argv[2]);</div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>    <span class="keywordtype">string</span> model = string(argv[3]);</div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>    <span class="keywordtype">int</span> <a class="code hl_function" href="../../d6/d84/namespacecv_1_1quality_1_1quality__utils.html#ae55d1c89ff5761730174745401162743">scale</a> = atoi(argv[4]);</div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span> </div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img = <a class="code hl_function" href="../../d4/da8/group__imgcodecs.html#gab32ee19e22660912565f8140d0f675a8">imread</a>(path);</div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <span class="keywordflow">if</span> (img.<a class="code hl_function" href="../../d3/d63/classcv_1_1Mat.html#abbec3525a852e77998aba034813fded4">empty</a>()) {</div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>        cerr &lt;&lt; <span class="stringliteral">&quot;Couldn&#39;t load image: &quot;</span> &lt;&lt; img &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>        <span class="keywordflow">return</span> -2;</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span>    }</div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span> </div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>    <span class="comment">//Crop the image so the images will be aligned</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>    <span class="keywordtype">int</span> width = img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#aa3e5a47585c9ef6a0842556739155e3e">cols</a> - (img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#aa3e5a47585c9ef6a0842556739155e3e">cols</a> % <a class="code hl_function" href="../../d6/d84/namespacecv_1_1quality_1_1quality__utils.html#ae55d1c89ff5761730174745401162743">scale</a>);</div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>    <span class="keywordtype">int</span> height = img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#abed816466c45234254d25bc59c31245e">rows</a> - (img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#abed816466c45234254d25bc59c31245e">rows</a> % <a class="code hl_function" href="../../d6/d84/namespacecv_1_1quality_1_1quality__utils.html#ae55d1c89ff5761730174745401162743">scale</a>);</div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> cropped = img(<a class="code hl_class" href="../../d2/d44/classcv_1_1Rect__.html">Rect</a>(0, 0, width, height));</div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span> </div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <span class="comment">//Downscale the image for benchmarking</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img_downscaled;</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span>    <a class="code hl_function" href="../../da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">resize</a>(cropped, img_downscaled, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>(), 1.0 / scale, 1.0 / scale);</div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span> </div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>    <span class="comment">//Make dnn super resolution instance</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>    DnnSuperResImpl sr;</div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span> </div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>    vector &lt;Mat&gt; allImages;</div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img_new;</div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span> </div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <span class="comment">//Read and set the dnn model</span></div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>    sr.readModel(model);</div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>    sr.setModel(algorithm, scale);</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span>    sr.upsample(img_downscaled, img_new);</div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span> </div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>    vector&lt;double&gt; psnrValues = vector&lt;double&gt;();</div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>    vector&lt;double&gt; ssimValues = vector&lt;double&gt;();</div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span> </div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <span class="comment">//DL MODEL</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <a class="code hl_class" href="../../d6/dcf/classcv_1_1Vec.html">Vec2f</a> quality = getQualityValues(cropped, img_new);</div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span> </div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span>    psnrValues.push_back(quality[0]);</div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>    ssimValues.push_back(quality[1]);</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span> </div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>    cout &lt;&lt; sr.getAlgorithm() &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>    cout &lt;&lt; <span class="stringliteral">&quot;PSNR: &quot;</span> &lt;&lt; quality[0] &lt;&lt; <span class="stringliteral">&quot; SSIM: &quot;</span> &lt;&lt; quality[1] &lt;&lt; endl;</div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>    cout &lt;&lt; <span class="stringliteral">&quot;----------------------&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span> </div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>    <span class="comment">//BICUBIC</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> bicubic;</div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <a class="code hl_function" href="../../da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">resize</a>(img_downscaled, bicubic, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>(), scale, scale, INTER_CUBIC);</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>    quality = getQualityValues(cropped, bicubic);</div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span> </div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span>    psnrValues.push_back(quality[0]);</div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>    ssimValues.push_back(quality[1]);</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span> </div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>    cout &lt;&lt; <span class="stringliteral">&quot;Bicubic &quot;</span> &lt;&lt; endl;</div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>    cout &lt;&lt; <span class="stringliteral">&quot;PSNR: &quot;</span> &lt;&lt; quality[0] &lt;&lt; <span class="stringliteral">&quot; SSIM: &quot;</span> &lt;&lt; quality[1] &lt;&lt; endl;</div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>    cout &lt;&lt; <span class="stringliteral">&quot;----------------------&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span> </div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>    <span class="comment">//NEAREST NEIGHBOR</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> nearest;</div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <a class="code hl_function" href="../../da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">resize</a>(img_downscaled, nearest, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>(), scale, scale, INTER_NEAREST);</div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>    quality = getQualityValues(cropped, nearest);</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span> </div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>    psnrValues.push_back(quality[0]);</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>    ssimValues.push_back(quality[1]);</div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span> </div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>    cout &lt;&lt; <span class="stringliteral">&quot;Nearest neighbor&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>    cout &lt;&lt; <span class="stringliteral">&quot;PSNR: &quot;</span> &lt;&lt; quality[0] &lt;&lt; <span class="stringliteral">&quot; SSIM: &quot;</span> &lt;&lt; quality[1] &lt;&lt; endl;</div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>    cout &lt;&lt; <span class="stringliteral">&quot;----------------------&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span> </div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>    <span class="comment">//LANCZOS</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>    <a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> lanczos;</div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>    <a class="code hl_function" href="../../da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">resize</a>(img_downscaled, lanczos, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>(), scale, scale, INTER_LANCZOS4);</div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>    quality = getQualityValues(cropped, lanczos);</div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span> </div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>    psnrValues.push_back(quality[0]);</div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    ssimValues.push_back(quality[1]);</div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span> </div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span>    cout &lt;&lt; <span class="stringliteral">&quot;Lanczos&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    cout &lt;&lt; <span class="stringliteral">&quot;PSNR: &quot;</span> &lt;&lt; quality[0] &lt;&lt; <span class="stringliteral">&quot; SSIM: &quot;</span> &lt;&lt; quality[1] &lt;&lt; endl;</div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span>    cout &lt;&lt; <span class="stringliteral">&quot;-----------------------------------------------&quot;</span> &lt;&lt; endl;</div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span> </div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>    vector &lt;Mat&gt; imgs{img_new, bicubic, nearest, lanczos};</div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    vector &lt;String&gt; titles{sr.getAlgorithm(), <span class="stringliteral">&quot;Bicubic&quot;</span>, <span class="stringliteral">&quot;Nearest neighbor&quot;</span>, <span class="stringliteral">&quot;Lanczos&quot;</span>};</div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>    showBenchmark(imgs, <span class="stringliteral">&quot;Quality benchmark&quot;</span>, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">Size</a>(bicubic.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#aa3e5a47585c9ef6a0842556739155e3e">cols</a>, bicubic.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#abed816466c45234254d25bc59c31245e">rows</a>), titles, psnrValues, ssimValues);</div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span> </div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>    <a class="code hl_function" href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">waitKey</a>(0);</div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span> </div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>}</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span><span class="preprocessor">#else</span></div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span><span class="keywordtype">int</span> <a class="code hl_function" href="../../dc/d89/highgui__qt_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a>()</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>{</div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>    std::cout &lt;&lt; <span class="stringliteral">&quot;This sample requires the OpenCV Quality module.&quot;</span> &lt;&lt; std::endl;</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>    <span class="keywordflow">return</span> 0;</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>}</div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span><span class="preprocessor">#endif</span></div>
<div class="ttc" id="aclasscv_1_1Mat_html"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html">cv::Mat</a></div><div class="ttdoc">n-dimensional dense array class</div><div class="ttdef"><b>Definition</b> mat.hpp:812</div></div>
<div class="ttc" id="aclasscv_1_1Mat_html_a33fd5d125b4c302b0c9aa86980791a77"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#a33fd5d125b4c302b0c9aa86980791a77">cv::Mat::copyTo</a></div><div class="ttdeci">void copyTo(OutputArray m) const</div><div class="ttdoc">Copies the matrix to another one.</div></div>
<div class="ttc" id="aclasscv_1_1Mat_html_aa3e5a47585c9ef6a0842556739155e3e"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#aa3e5a47585c9ef6a0842556739155e3e">cv::Mat::cols</a></div><div class="ttdeci">int cols</div><div class="ttdef"><b>Definition</b> mat.hpp:2138</div></div>
<div class="ttc" id="aclasscv_1_1Mat_html_abbec3525a852e77998aba034813fded4"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#abbec3525a852e77998aba034813fded4">cv::Mat::empty</a></div><div class="ttdeci">bool empty() const</div><div class="ttdoc">Returns true if the array has no elements.</div></div>
<div class="ttc" id="aclasscv_1_1Mat_html_abed816466c45234254d25bc59c31245e"><div class="ttname"><a href="../../d3/d63/classcv_1_1Mat.html#abed816466c45234254d25bc59c31245e">cv::Mat::rows</a></div><div class="ttdeci">int rows</div><div class="ttdoc">the number of rows and columns or (-1, -1) when the matrix has more than 2 dimensions</div><div class="ttdef"><b>Definition</b> mat.hpp:2138</div></div>
<div class="ttc" id="aclasscv_1_1Point___html"><div class="ttname"><a href="../../db/d4e/classcv_1_1Point__.html">cv::Point_&lt; int &gt;</a></div></div>
<div class="ttc" id="aclasscv_1_1Rect___html"><div class="ttname"><a href="../../d2/d44/classcv_1_1Rect__.html">cv::Rect_</a></div><div class="ttdoc">Template class for 2D rectangles.</div><div class="ttdef"><b>Definition</b> types.hpp:444</div></div>
<div class="ttc" id="aclasscv_1_1Scalar___html"><div class="ttname"><a href="../../d1/da0/classcv_1_1Scalar__.html">cv::Scalar_&lt; double &gt;</a></div></div>
<div class="ttc" id="aclasscv_1_1Size___html"><div class="ttname"><a href="../../d6/d50/classcv_1_1Size__.html">cv::Size_</a></div><div class="ttdoc">Template class for specifying the size of an image or rectangle.</div><div class="ttdef"><b>Definition</b> types.hpp:335</div></div>
<div class="ttc" id="aclasscv_1_1Size___html_a1d289dce6b5d8006a54f3ee0259fc545"><div class="ttname"><a href="../../d6/d50/classcv_1_1Size__.html#a1d289dce6b5d8006a54f3ee0259fc545">cv::Size_::height</a></div><div class="ttdeci">_Tp height</div><div class="ttdoc">the height</div><div class="ttdef"><b>Definition</b> types.hpp:363</div></div>
<div class="ttc" id="aclasscv_1_1Size___html_abfe0367b32c407ddccf5ddf92667c73d"><div class="ttname"><a href="../../d6/d50/classcv_1_1Size__.html#abfe0367b32c407ddccf5ddf92667c73d">cv::Size_::width</a></div><div class="ttdeci">_Tp width</div><div class="ttdoc">the width</div><div class="ttdef"><b>Definition</b> types.hpp:362</div></div>
<div class="ttc" id="aclasscv_1_1Vec_html"><div class="ttname"><a href="../../d6/dcf/classcv_1_1Vec.html">cv::Vec&lt; double, 2 &gt;</a></div></div>
<div class="ttc" id="adnn__superres_8hpp_html"><div class="ttname"><a href="../../d3/db0/dnn__superres_8hpp.html">dnn_superres.hpp</a></div></div>
<div class="ttc" id="agroup__highgui_html_ga5628525ad33f52eab17feebcfba38bd7"><div class="ttname"><a href="../../d7/dfc/group__highgui.html#ga5628525ad33f52eab17feebcfba38bd7">cv::waitKey</a></div><div class="ttdeci">int waitKey(int delay=0)</div><div class="ttdoc">Waits for a pressed key.</div></div>
<div class="ttc" id="agroup__imgcodecs_html_gab32ee19e22660912565f8140d0f675a8"><div class="ttname"><a href="../../d4/da8/group__imgcodecs.html#gab32ee19e22660912565f8140d0f675a8">cv::imread</a></div><div class="ttdeci">CV_EXPORTS_W Mat imread(const String &amp;filename, int flags=IMREAD_COLOR)</div><div class="ttdoc">Loads an image from a file.</div></div>
<div class="ttc" id="agroup__imgproc__transform_html_ga47a974309e9102f5f08231edc7e7529d"><div class="ttname"><a href="../../da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">cv::resize</a></div><div class="ttdeci">void resize(InputArray src, OutputArray dst, Size dsize, double fx=0, double fy=0, int interpolation=INTER_LINEAR)</div><div class="ttdoc">Resizes an image.</div></div>
<div class="ttc" id="ahighgui_8hpp_html"><div class="ttname"><a href="../../d4/dd5/highgui_8hpp.html">highgui.hpp</a></div></div>
<div class="ttc" id="ahighgui__qt_8cpp_html_a0ddf1224851353fc92bfbff6f499fa97"><div class="ttname"><a href="../../dc/d89/highgui__qt_8cpp.html#a0ddf1224851353fc92bfbff6f499fa97">main</a></div><div class="ttdeci">int main(int argc, char *argv[])</div><div class="ttdef"><b>Definition</b> highgui_qt.cpp:3</div></div>
<div class="ttc" id="aimgproc_2include_2opencv2_2imgproc_8hpp_html"><div class="ttname"><a href="../../d1/d4f/imgproc_2include_2opencv2_2imgproc_8hpp.html">imgproc.hpp</a></div></div>
<div class="ttc" id="anamespacecv_1_1quality_1_1quality__utils_html_ae55d1c89ff5761730174745401162743"><div class="ttname"><a href="../../d6/d84/namespacecv_1_1quality_1_1quality__utils.html#ae55d1c89ff5761730174745401162743">cv::quality::quality_utils::scale</a></div><div class="ttdeci">void scale(cv::Mat &amp;mat, const cv::Mat &amp;range, const T min, const T max)</div><div class="ttdef"><b>Definition</b> quality_utils.hpp:90</div></div>
<div class="ttc" id="anamespacecv_html"><div class="ttname"><a href="../../d2/d75/namespacecv.html">cv</a></div><div class="ttdoc">&quot;black box&quot; representation of the file storage associated with a file on disk.</div><div class="ttdef"><b>Definition</b> core.hpp:102</div></div>
<div class="ttc" id="anamespacestd_html"><div class="ttname"><a href="../../d8/dcc/namespacestd.html">std</a></div><div class="ttdoc">STL namespace.</div></div>
<div class="ttc" id="aquality_8hpp_html"><div class="ttname"><a href="../../dd/d5c/quality_8hpp.html">quality.hpp</a></div></div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md1888"></a>
Explanation</h1>
<ol type="1">
<li><p class="startli"><b>Read and downscale the image</b> </p><div class="fragment"><div class="line"><span class="keywordtype">int</span> width = img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#aa3e5a47585c9ef6a0842556739155e3e">cols</a> - (img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#aa3e5a47585c9ef6a0842556739155e3e">cols</a> % scale);</div>
<div class="line"><span class="keywordtype">int</span> height = img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#abed816466c45234254d25bc59c31245e">rows</a> - (img.<a class="code hl_variable" href="../../d3/d63/classcv_1_1Mat.html#abed816466c45234254d25bc59c31245e">rows</a> % scale);</div>
<div class="line"><a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> cropped = img(<a class="code hl_class" href="../../d2/d44/classcv_1_1Rect__.html">Rect</a>(0, 0, width, height));</div>
<div class="line"><a class="code hl_class" href="../../d3/d63/classcv_1_1Mat.html">Mat</a> img_downscaled;</div>
<div class="line"><a class="code hl_function" href="../../da/d54/group__imgproc__transform.html#ga47a974309e9102f5f08231edc7e7529d">cv::resize</a>(cropped, img_downscaled, <a class="code hl_class" href="../../d6/d50/classcv_1_1Size__.html">cv::Size</a>(), 1.0 / scale, 1.0 / scale);</div>
</div><!-- fragment --><p class="startli">Resize the image by the scaling factor. Before that a cropping is necessary, so the images will align.</p>
</li>
<li><p class="startli"><b>Set the model</b> </p><div class="fragment"><div class="line">DnnSuperResImpl sr;</div>
<div class="line">sr.readModel(path);</div>
<div class="line">sr.setModel(algorithm, scale);</div>
<div class="line">sr.upsample(img_downscaled, img_new);</div>
</div><!-- fragment --><p class="startli">Instantiate a dnn super-resolution object. Read and set the algorithm and scaling factor.</p>
</li>
<li><p class="startli"><b>Perform benchmarking</b> </p><div class="fragment"><div class="line"><span class="keywordtype">double</span> psnr = PSNR(img_new, cropped);</div>
<div class="line"><a class="code hl_class" href="../../d1/da0/classcv_1_1Scalar__.html">Scalar</a> q = <a class="code hl_function" href="../../d9/db5/classcv_1_1quality_1_1QualitySSIM.html#a49d5ecc72e83b8876c8293244c3667e4">cv::quality::QualitySSIM::compute</a>(img_new, cropped, <a class="code hl_function" href="../../dc/d84/group__core__basic.html#gad9287b23bba2fed753b36ef561ae7346">cv::noArray</a>());</div>
<div class="line"><span class="keywordtype">double</span> ssim = mean(<a class="code hl_class" href="../../d6/dcf/classcv_1_1Vec.html">cv::Vec3f</a>(q[0], q[1], q[2]))[0];</div>
<div class="ttc" id="aclasscv_1_1quality_1_1QualitySSIM_html_a49d5ecc72e83b8876c8293244c3667e4"><div class="ttname"><a href="../../d9/db5/classcv_1_1quality_1_1QualitySSIM.html#a49d5ecc72e83b8876c8293244c3667e4">cv::quality::QualitySSIM::compute</a></div><div class="ttdeci">cv::Scalar compute(InputArray cmp) CV_OVERRIDE</div><div class="ttdoc">Computes SSIM.</div></div>
<div class="ttc" id="agroup__core__basic_html_gad9287b23bba2fed753b36ef561ae7346"><div class="ttname"><a href="../../dc/d84/group__core__basic.html#gad9287b23bba2fed753b36ef561ae7346">cv::noArray</a></div><div class="ttdeci">InputOutputArray noArray()</div></div>
</div><!-- fragment --><p class="startli">Calculate PSNR and SSIM. Use OpenCVs PSNR (core opencv) and SSIM (contrib) functions to compare the images. Repeat it with other upscaling algorithms, such as other DL models or interpolation methods (eg. bicubic, nearest neighbor).</p>
</li>
</ol>
<h1><a class="anchor" id="autotoc_md1889"></a>
Benchmarking results</h1>
<h1><a class="anchor" id="autotoc_md1890"></a>
General100 dataset</h1>
<h2><a class="anchor" id="autotoc_md1891"></a>
2x scaling factor</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadCenter">Avg inference time in sec (CPU)   </th><th class="markdownTableHeadRight">Avg PSNR   </th><th class="markdownTableHeadRight">Avg SSIM    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESPCN   </td><td class="markdownTableBodyCenter"><b>0.008795</b>   </td><td class="markdownTableBodyRight">32.7059   </td><td class="markdownTableBodyRight">0.9276    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">EDSR   </td><td class="markdownTableBodyCenter">5.923450   </td><td class="markdownTableBodyRight"><b>34.1300</b>   </td><td class="markdownTableBodyRight"><b>0.9447</b>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FSRCNN   </td><td class="markdownTableBodyCenter">0.021741   </td><td class="markdownTableBodyRight">32.8886   </td><td class="markdownTableBodyRight">0.9301    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LapSRN   </td><td class="markdownTableBodyCenter">0.114812   </td><td class="markdownTableBodyRight">32.2681   </td><td class="markdownTableBodyRight">0.9248    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Bicubic   </td><td class="markdownTableBodyCenter">0.000208   </td><td class="markdownTableBodyRight">32.1638   </td><td class="markdownTableBodyRight">0.9305    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Nearest neighbor   </td><td class="markdownTableBodyCenter">0.000114   </td><td class="markdownTableBodyRight">29.1665   </td><td class="markdownTableBodyRight">0.9049    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Lanczos   </td><td class="markdownTableBodyCenter">0.001094   </td><td class="markdownTableBodyRight">32.4687   </td><td class="markdownTableBodyRight">0.9327   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md1892"></a>
3x scaling factor</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadCenter">Avg inference time in sec (CPU)   </th><th class="markdownTableHeadRight">Avg PSNR   </th><th class="markdownTableHeadRight">Avg SSIM    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESPCN   </td><td class="markdownTableBodyCenter"><b>0.005495</b>   </td><td class="markdownTableBodyRight">28.4229   </td><td class="markdownTableBodyRight">0.8474    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">EDSR   </td><td class="markdownTableBodyCenter">2.455510   </td><td class="markdownTableBodyRight"><b>29.9828</b>   </td><td class="markdownTableBodyRight"><b>0.8801</b>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FSRCNN   </td><td class="markdownTableBodyCenter">0.008807   </td><td class="markdownTableBodyRight">28.3068   </td><td class="markdownTableBodyRight">0.8429    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LapSRN   </td><td class="markdownTableBodyCenter">0.282575   </td><td class="markdownTableBodyRight">26.7330   </td><td class="markdownTableBodyRight">0.8862    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Bicubic   </td><td class="markdownTableBodyCenter">0.000311   </td><td class="markdownTableBodyRight">26.0635   </td><td class="markdownTableBodyRight">0.8754    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Nearest neighbor   </td><td class="markdownTableBodyCenter">0.000148   </td><td class="markdownTableBodyRight">23.5628   </td><td class="markdownTableBodyRight">0.8174    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Lanczos   </td><td class="markdownTableBodyCenter">0.001012   </td><td class="markdownTableBodyRight">25.9115   </td><td class="markdownTableBodyRight">0.8706   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md1893"></a>
4x scaling factor</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadNone"></th><th class="markdownTableHeadCenter">Avg inference time in sec (CPU)   </th><th class="markdownTableHeadRight">Avg PSNR   </th><th class="markdownTableHeadRight">Avg SSIM    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">ESPCN   </td><td class="markdownTableBodyCenter"><b>0.004311</b>   </td><td class="markdownTableBodyRight">26.6870   </td><td class="markdownTableBodyRight">0.7891    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">EDSR   </td><td class="markdownTableBodyCenter">1.607570   </td><td class="markdownTableBodyRight"><b>28.1552</b>   </td><td class="markdownTableBodyRight"><b>0.8317</b>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">FSRCNN   </td><td class="markdownTableBodyCenter">0.005302   </td><td class="markdownTableBodyRight">26.6088   </td><td class="markdownTableBodyRight">0.7863    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">LapSRN   </td><td class="markdownTableBodyCenter">0.121229   </td><td class="markdownTableBodyRight">26.7383   </td><td class="markdownTableBodyRight">0.7896    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Bicubic   </td><td class="markdownTableBodyCenter">0.000311   </td><td class="markdownTableBodyRight">26.0635   </td><td class="markdownTableBodyRight">0.8754    </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyNone">Nearest neighbor   </td><td class="markdownTableBodyCenter">0.000148   </td><td class="markdownTableBodyRight">23.5628   </td><td class="markdownTableBodyRight">0.8174    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyNone">Lanczos   </td><td class="markdownTableBodyCenter">0.001012   </td><td class="markdownTableBodyRight">25.9115   </td><td class="markdownTableBodyRight">0.8706   </td></tr>
</table>
<h1><a class="anchor" id="autotoc_md1894"></a>
Images</h1>
<h2><a class="anchor" id="autotoc_md1895"></a>
2x scaling factor</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Set5: butterfly.png   </th><th class="markdownTableHeadCenter">size: 256x256   </th><th class="markdownTableHeadCenter" colspan="2"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img src="../../orig_butterfly.jpg" alt="" class="inline" title="Original"/>      </td><td class="markdownTableBodyCenter"><img src="../../bicubic_butterfly.jpg" alt="" class="inline" title="Bicubic interpolation"/>      </td><td class="markdownTableBodyCenter"><img src="../../nearest_butterfly.jpg" alt="" class="inline" title="Nearest neighbor interpolation"/>      </td><td class="markdownTableBodyCenter"><img src="../../lanczos_butterfly.jpg" alt="" class="inline" title="Lanczos interpolation"/>       </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">PSRN / SSIM / Speed (CPU)   </td><td class="markdownTableBodyCenter">26.6645 / 0.9048 / 0.000201   </td><td class="markdownTableBodyCenter">23.6854 / 0.8698 / <b>0.000075</b>   </td><td class="markdownTableBodyCenter"><b>26.9476</b> / <b>0.9075</b> / 0.001039    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img src="../../espcn_butterfly.jpg" alt="" class="inline" title="ESPCN"/>      </td><td class="markdownTableBodyCenter"><img src="../../fsrcnn_butterfly.jpg" alt="" class="inline" title="FSRCNN"/>      </td><td class="markdownTableBodyCenter"><img src="../../lapsrn_butterfly.jpg" alt="" class="inline" title="LapSRN"/>      </td><td class="markdownTableBodyCenter"><img src="../../edsr_butterfly.jpg" alt="" class="inline" title="EDSR"/>       </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">29.0341 / 0.9354 / <b>0.004157</b>   </td><td class="markdownTableBodyCenter">29.0077 / 0.9345 / 0.006325   </td><td class="markdownTableBodyCenter">27.8212 / 0.9230 / 0.037937   </td><td class="markdownTableBodyCenter"><b>30.0347</b> / <b>0.9453</b> / 2.077280   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md1896"></a>
3x scaling factor</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Urban100: img_001.png   </th><th class="markdownTableHeadCenter">size: 1024x644   </th><th class="markdownTableHeadCenter" colspan="2"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img src="../../orig_urban.jpg" alt="" class="inline" title="Original"/>      </td><td class="markdownTableBodyCenter"><img src="../../bicubic_urban.jpg" alt="" class="inline" title="Bicubic interpolation"/>      </td><td class="markdownTableBodyCenter"><img src="../../nearest_urban.jpg" alt="" class="inline" title="Nearest neighbor interpolation"/>      </td><td class="markdownTableBodyCenter"><img src="../../lanczos_urban.jpg" alt="" class="inline" title="Lanczos interpolation"/>       </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">PSRN / SSIM / Speed (CPU)   </td><td class="markdownTableBodyCenter">27.0474 / <b>0.8484</b> / 0.000391   </td><td class="markdownTableBodyCenter">26.0842 / 0.8353 / <b>0.000236</b>   </td><td class="markdownTableBodyCenter"><b>27.0704</b> / 0.8483 / 0.002234    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img src="../../espcn_urban.jpg" alt="" class="inline" title="ESPCN"/>      </td><td class="markdownTableBodyCenter"><img src="../../fsrcnn_urban.jpg" alt="" class="inline" title="FSRCNN"/>      </td><td class="markdownTableBodyCenter">LapSRN is not trained for 3x <br  />
 because of its architecture   </td><td class="markdownTableBodyCenter"><img src="../../edsr_urban.jpg" alt="" class="inline" title="EDSR"/>       </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">28.0118 / 0.8588 / <b>0.030748</b>   </td><td class="markdownTableBodyCenter">28.0184 / 0.8597 / 0.094173   </td><td class="markdownTableBodyCenter"></td><td class="markdownTableBodyCenter"><b>30.5671</b> / <b>0.9019</b> / 9.517580   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md1897"></a>
4x scaling factor</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Set14: comic.png   </th><th class="markdownTableHeadCenter">size: 250x361   </th><th class="markdownTableHeadCenter" colspan="2"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img src="../../orig_comic.jpg" alt="" class="inline" title="Original"/>      </td><td class="markdownTableBodyCenter"><img src="../../bicubic_comic.jpg" alt="" class="inline" title="Bicubic interpolation"/>      </td><td class="markdownTableBodyCenter"><img src="../../nearest_comic.jpg" alt="" class="inline" title="Nearest neighbor interpolation"/>      </td><td class="markdownTableBodyCenter"><img src="../../lanczos_comic.jpg" alt="" class="inline" title="Lanczos interpolation"/>       </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">PSRN / SSIM / Speed (CPU)   </td><td class="markdownTableBodyCenter"><b>19.6766</b> / <b>0.6413</b> / 0.000262   </td><td class="markdownTableBodyCenter">18.5106 / 0.5879 / <b>0.000085</b>   </td><td class="markdownTableBodyCenter">19.4948 / 0.6317 / 0.001098    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img src="../../espcn_comic.jpg" alt="" class="inline" title="ESPCN"/>      </td><td class="markdownTableBodyCenter"><img src="../../fsrcnn_comic.jpg" alt="" class="inline" title="FSRCNN"/>      </td><td class="markdownTableBodyCenter"><img src="../../lapsrn_comic.jpg" alt="" class="inline" title="LapSRN"/>      </td><td class="markdownTableBodyCenter"><img src="../../edsr_comic.jpg" alt="" class="inline" title="EDSR"/>       </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">20.0417 / 0.6302 / <b>0.001894</b>   </td><td class="markdownTableBodyCenter">20.0885 / 0.6384 / 0.002103   </td><td class="markdownTableBodyCenter">20.0676 / 0.6339 / 0.061640   </td><td class="markdownTableBodyCenter"><b>20.5233</b> / <b>0.6901</b> / 0.665876   </td></tr>
</table>
<h2><a class="anchor" id="autotoc_md1898"></a>
8x scaling factor</h2>
<table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">Div2K: 0006.png   </th><th class="markdownTableHeadCenter">size: 1356x2040   </th><th class="markdownTableHeadCenter"></th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img src="../../orig_div2k.jpg" alt="" class="inline" title="Original"/>      </td><td class="markdownTableBodyCenter"><img src="../../bicubic_div2k.jpg" alt="" class="inline" title="Bicubic interpolation"/>      </td><td class="markdownTableBodyCenter"><img src="../../nearest_div2k.jpg" alt="" class="inline" title="Nearest neighbor interpolation"/>       </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">PSRN / SSIM / Speed (CPU)   </td><td class="markdownTableBodyCenter">26.3139 / <b>0.8033</b> / 0.001107   </td><td class="markdownTableBodyCenter">23.8291 / 0.7340 / <b>0.000611</b>    </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter"><img src="../../lanczos_div2k.jpg" alt="" class="inline" title="Lanczos interpolation"/>      </td><td class="markdownTableBodyCenter"><img src="../../lapsrn_div2k.jpg" alt="" class="inline" title="LapSRN"/>      </td><td class="markdownTableBodyCenter"></td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">26.1565 / 0.7962 / 0.004782   </td><td class="markdownTableBodyCenter"><b>26.7046</b> / 0.7987 / 2.274290   </td><td class="markdownTableBodyCenter"></td></tr>
</table>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Jun 2 2024 21:52:14 for OpenCV by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="../../doxygen.png" alt="doxygen"/>
</a> 1.9.8
</small></address>
<script type="text/javascript">
//<![CDATA[
addTutorialsButtons();
//]]>
</script>
</body>
</html>
